{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://ReactComplexTree/webpack/universalModuleDefinition","webpack://ReactComplexTree/./src/EventEmitter.ts","webpack://ReactComplexTree/./src/controlledEnvironment/ControlledTreeEnvironment.tsx","webpack://ReactComplexTree/./src/controlledEnvironment/InteractionManagerProvider.tsx","webpack://ReactComplexTree/./src/controlledEnvironment/buildInteractionMode.ts","webpack://ReactComplexTree/./src/controlledEnvironment/layoutUtils.ts","webpack://ReactComplexTree/./src/controlledEnvironment/mergeInteractionManagers.ts","webpack://ReactComplexTree/./src/controlledEnvironment/useControlledTreeEnvironmentProps.ts","webpack://ReactComplexTree/./src/controlledEnvironment/useLinearItems.ts","webpack://ReactComplexTree/./src/drag/DragAndDropProvider.tsx","webpack://ReactComplexTree/./src/drag/DraggingPositionEvaluation.ts","webpack://ReactComplexTree/./src/drag/useCanDropAt.ts","webpack://ReactComplexTree/./src/drag/useDraggingPosition.ts","webpack://ReactComplexTree/./src/drag/useGetParentOfLinearItem.ts","webpack://ReactComplexTree/./src/drag/useGetViableDragPositions.ts","webpack://ReactComplexTree/./src/environmentActions/EnvironmentActionsProvider.tsx","webpack://ReactComplexTree/./src/environmentActions/useCreatedEnvironmentRef.ts","webpack://ReactComplexTree/./src/hotkeys/defaultKeyboardBindings.ts","webpack://ReactComplexTree/./src/hotkeys/useHotkey.ts","webpack://ReactComplexTree/./src/hotkeys/useKey.ts","webpack://ReactComplexTree/./src/hotkeys/useKeyboardBindings.ts","webpack://ReactComplexTree/./src/index.ts","webpack://ReactComplexTree/./src/interactionMode/ClickArrowToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/interactionMode/ClickItemToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/interactionMode/DoubleClickItemToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/isControlKey.ts","webpack://ReactComplexTree/./src/renderers/createDefaultRenderers.tsx","webpack://ReactComplexTree/./src/renderers/index.ts","webpack://ReactComplexTree/./src/renderers/useRenderers.ts","webpack://ReactComplexTree/./src/search/SearchInput.tsx","webpack://ReactComplexTree/./src/search/defaultMatcher.ts","webpack://ReactComplexTree/./src/search/useSearchMatchFocus.ts","webpack://ReactComplexTree/./src/tree/DragBetweenLine.tsx","webpack://ReactComplexTree/./src/tree/LiveDescription.tsx","webpack://ReactComplexTree/./src/tree/MaybeLiveDescription.tsx","webpack://ReactComplexTree/./src/tree/Tree.tsx","webpack://ReactComplexTree/./src/tree/TreeManager.tsx","webpack://ReactComplexTree/./src/tree/defaultLiveDescriptors.ts","webpack://ReactComplexTree/./src/tree/getItemsLinearly.ts","webpack://ReactComplexTree/./src/tree/resolveLiveDescriptor.ts","webpack://ReactComplexTree/./src/tree/scrollIntoView.ts","webpack://ReactComplexTree/./src/tree/useCreatedTreeInformation.ts","webpack://ReactComplexTree/./src/tree/useFocusWithin.ts","webpack://ReactComplexTree/./src/tree/useMoveFocusToIndex.ts","webpack://ReactComplexTree/./src/tree/useSelectUpTo.ts","webpack://ReactComplexTree/./src/tree/useTreeKeyboardBindings.ts","webpack://ReactComplexTree/./src/tree/useViewState.ts","webpack://ReactComplexTree/./src/treeActions/TreeActionsProvider.tsx","webpack://ReactComplexTree/./src/treeActions/useCreatedTreeRef.ts","webpack://ReactComplexTree/./src/treeItem/TreeItemChildren.tsx","webpack://ReactComplexTree/./src/treeItem/TreeItemElement.tsx","webpack://ReactComplexTree/./src/treeItem/TreeItemRenamingInput.tsx","webpack://ReactComplexTree/./src/treeItem/useTreeItemRenderContext.ts","webpack://ReactComplexTree/./src/types.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/CompleteTreeDataProvider.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/StaticTreeDataProvider.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/UncontrolledTreeEnvironment.tsx","webpack://ReactComplexTree/./src/useCallSoon.ts","webpack://ReactComplexTree/./src/useGetOriginalItemOrder.ts","webpack://ReactComplexTree/./src/useHtmlElementEventListener.ts","webpack://ReactComplexTree/./src/useIsMounted.ts","webpack://ReactComplexTree/./src/useRefCopy.ts","webpack://ReactComplexTree/./src/useSideEffect.ts","webpack://ReactComplexTree/./src/useStableHandler.ts","webpack://ReactComplexTree/./src/utils.ts","webpack://ReactComplexTree/./src/waitFor.ts","webpack://ReactComplexTree/external umd \"React\"","webpack://ReactComplexTree/webpack/bootstrap","webpack://ReactComplexTree/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactComplexTree\"] = factory(require(\"React\"));\n\telse\n\t\troot[\"ReactComplexTree\"] = factory(root[\"React\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__1024__) => {\nreturn ","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter(options) {\n        this.handlerCount = 0;\n        this.handlers = [];\n        this.options = options;\n    }\n    Object.defineProperty(EventEmitter.prototype, \"numberOfHandlers\", {\n        get: function () {\n            return this.handlers.filter(function (h) { return !!h; }).length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EventEmitter.prototype.emit = function (payload) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var promises, _i, _c, handler, res;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        promises = [];\n                        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'emit', payload);\n                        for (_i = 0, _c = this.handlers; _i < _c.length; _i++) {\n                            handler = _c[_i];\n                            if (handler) {\n                                res = handler(payload);\n                                if (typeof (res === null || res === void 0 ? void 0 : res.then) === 'function') {\n                                    promises.push(res);\n                                }\n                            }\n                        }\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _d.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EventEmitter.prototype.on = function (handler) {\n        var _a, _b;\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'on');\n        this.handlers.push(handler);\n        // eslint-disable-next-line no-plusplus\n        return this.handlerCount++;\n    };\n    EventEmitter.prototype.off = function (handlerId) {\n        this.delete(handlerId);\n    };\n    EventEmitter.prototype.delete = function (handlerId) {\n        var _a, _b;\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'off');\n        this.handlers[handlerId] = null;\n    };\n    return EventEmitter;\n}());\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlledTreeEnvironment = exports.useTreeEnvironment = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar InteractionManagerProvider_1 = require(\"./InteractionManagerProvider\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar EnvironmentActionsProvider_1 = require(\"../environmentActions/EnvironmentActionsProvider\");\nvar useControlledTreeEnvironmentProps_1 = require(\"./useControlledTreeEnvironmentProps\");\nvar TreeEnvironmentContext = React.createContext(null);\nvar useTreeEnvironment = function () { return (0, react_1.useContext)(TreeEnvironmentContext); };\nexports.useTreeEnvironment = useTreeEnvironment;\nexports.ControlledTreeEnvironment = React.forwardRef(function (props, ref) {\n    var environmentContextProps = (0, useControlledTreeEnvironmentProps_1.useControlledTreeEnvironmentProps)(props);\n    var viewState = props.viewState, onFocusItem = props.onFocusItem;\n    // Make sure that every tree view state has a focused item\n    (0, react_1.useEffect)(function () {\n        var _a, _b, _c;\n        for (var _i = 0, _d = Object.keys(environmentContextProps.trees); _i < _d.length; _i++) {\n            var treeId = _d[_i];\n            var firstItemIndex = (_b = (_a = props.items[environmentContextProps.trees[treeId].rootItem]) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b[0];\n            var firstItem = firstItemIndex && props.items[firstItemIndex];\n            if (!((_c = viewState[treeId]) === null || _c === void 0 ? void 0 : _c.focusedItem) &&\n                environmentContextProps.trees[treeId] &&\n                firstItem) {\n                onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(firstItem, treeId, false);\n            }\n        }\n    }, [environmentContextProps.trees, onFocusItem, props.items, viewState]);\n    return (React.createElement(TreeEnvironmentContext.Provider, { value: environmentContextProps },\n        React.createElement(InteractionManagerProvider_1.InteractionManagerProvider, null,\n            React.createElement(DragAndDropProvider_1.DragAndDropProvider, null,\n                React.createElement(EnvironmentActionsProvider_1.EnvironmentActionsProvider, { ref: ref }, props.children)))));\n});\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InteractionManagerProvider = exports.useInteractionManager = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar types_1 = require(\"../types\");\nvar ControlledTreeEnvironment_1 = require(\"./ControlledTreeEnvironment\");\nvar mergeInteractionManagers_1 = require(\"./mergeInteractionManagers\");\nvar buildInteractionMode_1 = require(\"./buildInteractionMode\");\nvar InteractionManagerContext = React.createContext(null);\nvar useInteractionManager = function () {\n    return React.useContext(InteractionManagerContext);\n};\nexports.useInteractionManager = useInteractionManager;\nvar InteractionManagerProvider = function (_a) {\n    var children = _a.children;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var defaultInteractionMode = environment.defaultInteractionMode;\n    var interactionManager = (0, react_1.useMemo)(function () {\n        var _a;\n        if (defaultInteractionMode && typeof defaultInteractionMode !== 'string') {\n            if (defaultInteractionMode.extends) {\n                return (0, mergeInteractionManagers_1.mergeInteractionManagers)(defaultInteractionMode, (0, buildInteractionMode_1.buildInteractionMode)(defaultInteractionMode.extends, environment));\n            }\n            return defaultInteractionMode;\n        }\n        return (0, buildInteractionMode_1.buildInteractionMode)((_a = defaultInteractionMode) !== null && _a !== void 0 ? _a : types_1.InteractionMode.ClickItemToExpand, environment);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []); // TODO make sure that environment does not need to be refreshed\n    return (React.createElement(InteractionManagerContext.Provider, { value: interactionManager }, children));\n};\nexports.InteractionManagerProvider = InteractionManagerProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildInteractionMode = void 0;\nvar types_1 = require(\"../types\");\nvar DoubleClickItemToExpandInteractionManager_1 = require(\"../interactionMode/DoubleClickItemToExpandInteractionManager\");\nvar ClickItemToExpandInteractionManager_1 = require(\"../interactionMode/ClickItemToExpandInteractionManager\");\nvar ClickArrowToExpandInteractionManager_1 = require(\"../interactionMode/ClickArrowToExpandInteractionManager\");\nvar buildInteractionMode = function (mode, environment) {\n    switch (mode) {\n        case types_1.InteractionMode.DoubleClickItemToExpand:\n            return new DoubleClickItemToExpandInteractionManager_1.DoubleClickItemToExpandInteractionManager(environment);\n        case types_1.InteractionMode.ClickItemToExpand:\n            return new ClickItemToExpandInteractionManager_1.ClickItemToExpandInteractionManager(environment);\n        case types_1.InteractionMode.ClickArrowToExpand:\n            return new ClickArrowToExpandInteractionManager_1.ClickArrowToExpandInteractionManager(environment);\n        default:\n            throw Error(\"Unknown interaction mode \".concat(mode));\n    }\n};\nexports.buildInteractionMode = buildInteractionMode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isOutsideOfContainer = exports.computeItemHeight = void 0;\nvar utils_1 = require(\"../utils\");\nvar computeItemHeight = function (treeId) {\n    var _a;\n    var firstItem = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-container=\\\"true\\\"]\"));\n    if (firstItem) {\n        var style = getComputedStyle(firstItem);\n        // top margin flows into the bottom margin of the previous item, so ignore it\n        return (firstItem.offsetHeight +\n            Math.max(parseFloat(style.marginTop), parseFloat(style.marginBottom)));\n    }\n    return 5;\n};\nexports.computeItemHeight = computeItemHeight;\nvar isOutsideOfContainer = function (e, treeBb) {\n    return e.clientX <= treeBb.left ||\n        e.clientX >= treeBb.right ||\n        e.clientY <= treeBb.top ||\n        e.clientY >= treeBb.bottom;\n};\nexports.isOutsideOfContainer = isOutsideOfContainer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeInteractionManagers = void 0;\nvar mergeInteractionManagers = function (main, fallback) { return ({\n    mode: main.mode,\n    createInteractiveElementProps: function (item, treeId, actions, renderFlags) { return (__assign(__assign({}, fallback.createInteractiveElementProps(item, treeId, actions, renderFlags)), main.createInteractiveElementProps(item, treeId, actions, renderFlags))); },\n}); };\nexports.mergeInteractionManagers = mergeInteractionManagers;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useControlledTreeEnvironmentProps = void 0;\nvar react_1 = require(\"react\");\nvar scrollIntoView_1 = require(\"../tree/scrollIntoView\");\nvar useRenderers_1 = require(\"../renderers/useRenderers\");\nvar utils_1 = require(\"../utils\");\nvar getItemsLinearly_1 = require(\"../tree/getItemsLinearly\");\nvar useRefCopy_1 = require(\"../useRefCopy\");\nvar useControlledTreeEnvironmentProps = function (_a) {\n    var onExpandItemProp = _a.onExpandItem, onCollapseProp = _a.onCollapseItem, onDropProp = _a.onDrop, props = __rest(_a, [\"onExpandItem\", \"onCollapseItem\", \"onDrop\"]);\n    var _b = (0, react_1.useState)({}), trees = _b[0], setTrees = _b[1];\n    var _c = (0, react_1.useState)(), activeTreeId = _c[0], setActiveTreeId = _c[1];\n    var treeIds = (0, react_1.useMemo)(function () { return Object.keys(trees); }, [trees]);\n    var onFocusItem = props.onFocusItem, autoFocus = props.autoFocus, onRegisterTree = props.onRegisterTree, onUnregisterTree = props.onUnregisterTree, items = props.items, viewState = props.viewState;\n    var onFocusItemRef = (0, useRefCopy_1.useRefCopy)(onFocusItem);\n    var viewStateRef = (0, useRefCopy_1.useRefCopy)(viewState);\n    var linearItems = (0, react_1.useMemo)(function () {\n        return (0, utils_1.buildMapForTrees)(treeIds, function (treeId) { var _a; return (0, getItemsLinearly_1.getItemsLinearly)(trees[treeId].rootItem, (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {}, items); });\n    }, [trees, items, treeIds, viewState]);\n    var onFocusItemHandler = (0, react_1.useCallback)(function (item, treeId, setDomFocus) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (setDomFocus === void 0) { setDomFocus = true; }\n        if ((autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) && setDomFocus) {\n            var newItem = (_b = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-id=\\\"\").concat(item.index, \"\\\"]\"))) !== null && _b !== void 0 ? _b : (_c = (0, utils_1.getDocument)()) === null || _c === void 0 ? void 0 : _c.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-id]\"));\n            if (((_f = (_e = (_d = (0, utils_1.getDocument)()) === null || _d === void 0 ? void 0 : _d.activeElement) === null || _e === void 0 ? void 0 : _e.attributes.getNamedItem('data-rct-search-input')) === null || _f === void 0 ? void 0 : _f.value) !== 'true') {\n                // Move DOM focus to item if the current focus is not on the search input\n                (_g = newItem === null || newItem === void 0 ? void 0 : newItem.focus) === null || _g === void 0 ? void 0 : _g.call(newItem);\n            }\n            else {\n                // Otherwise just manually scroll into view\n                (0, scrollIntoView_1.scrollIntoView)(newItem);\n            }\n        }\n        if (((_h = viewStateRef.current[treeId]) === null || _h === void 0 ? void 0 : _h.focusedItem) === item.index) {\n            return;\n        }\n        (_j = onFocusItemRef.current) === null || _j === void 0 ? void 0 : _j.call(onFocusItemRef, item, treeId);\n    }, [autoFocus, onFocusItemRef, viewStateRef]);\n    var registerTree = (0, react_1.useCallback)(function (tree) {\n        setTrees(function (trees) {\n            var _a;\n            return (__assign(__assign({}, trees), (_a = {}, _a[tree.treeId] = tree, _a)));\n        });\n        onRegisterTree === null || onRegisterTree === void 0 ? void 0 : onRegisterTree(tree);\n    }, [onRegisterTree]);\n    var unregisterTree = (0, react_1.useCallback)(function (treeId) {\n        onUnregisterTree === null || onUnregisterTree === void 0 ? void 0 : onUnregisterTree(trees[treeId]);\n        delete trees[treeId];\n        setTrees(trees);\n    }, [onUnregisterTree, trees]);\n    var onCollapseItem = (0, react_1.useCallback)(function (item, treeId) {\n        onCollapseProp === null || onCollapseProp === void 0 ? void 0 : onCollapseProp(item, treeId);\n        setTrees(function (trees) { return trees; });\n    }, [onCollapseProp]);\n    var onExpandItem = (0, react_1.useCallback)(function (item, treeId) {\n        onExpandItemProp === null || onExpandItemProp === void 0 ? void 0 : onExpandItemProp(item, treeId);\n        setTrees(function (trees) { return trees; });\n    }, [onExpandItemProp]);\n    var onDrop = (0, react_1.useCallback)(function (items, target) {\n        onDropProp === null || onDropProp === void 0 ? void 0 : onDropProp(items, target);\n        setTrees(function (trees) { return trees; });\n    }, [onDropProp]);\n    var focusTree = (0, react_1.useCallback)(function (treeId) {\n        var _a, _b;\n        var focusItem = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\n        (_b = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _b === void 0 ? void 0 : _b.call(focusItem);\n    }, []);\n    var setActiveTree = (0, react_1.useCallback)(function (treeIdOrSetStateFunction, autoFocusTree) {\n        if (autoFocusTree === void 0) { autoFocusTree = true; }\n        var maybeFocusTree = function (treeId) {\n            var _a, _b;\n            if (autoFocusTree &&\n                (autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) &&\n                treeId &&\n                !((_b = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"]\"))) === null || _b === void 0 ? void 0 : _b.contains(document.activeElement))) {\n                focusTree(treeId);\n            }\n        };\n        if (typeof treeIdOrSetStateFunction === 'function') {\n            setActiveTreeId(function (oldValue) {\n                var treeId = treeIdOrSetStateFunction(oldValue);\n                if (treeId !== oldValue) {\n                    maybeFocusTree(treeId);\n                }\n                return treeId;\n            });\n        }\n        else {\n            var treeId = treeIdOrSetStateFunction;\n            setActiveTreeId(treeId);\n            maybeFocusTree(treeId);\n        }\n    }, [autoFocus, focusTree]);\n    var renderers = (0, useRenderers_1.useRenderers)(props);\n    return __assign(__assign(__assign({}, renderers), props), { onFocusItem: onFocusItemHandler, registerTree: registerTree, unregisterTree: unregisterTree, onExpandItem: onExpandItem, onCollapseItem: onCollapseItem, onDrop: onDrop, setActiveTree: setActiveTree, treeIds: treeIds, trees: trees, activeTreeId: activeTreeId, linearItems: linearItems });\n};\nexports.useControlledTreeEnvironmentProps = useControlledTreeEnvironmentProps;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useLinearItems = void 0;\nvar ControlledTreeEnvironment_1 = require(\"./ControlledTreeEnvironment\");\nvar useLinearItems = function (treeId) {\n    return (0, ControlledTreeEnvironment_1.useTreeEnvironment)().linearItems[treeId];\n};\nexports.useLinearItems = useLinearItems;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragAndDropProvider = exports.useDragAndDrop = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useCanDropAt_1 = require(\"./useCanDropAt\");\nvar useGetViableDragPositions_1 = require(\"./useGetViableDragPositions\");\nvar useSideEffect_1 = require(\"../useSideEffect\");\nvar utils_1 = require(\"../utils\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar useStableHandler_1 = require(\"../useStableHandler\");\nvar useGetOriginalItemOrder_1 = require(\"../useGetOriginalItemOrder\");\nvar useDraggingPosition_1 = require(\"./useDraggingPosition\");\nvar layoutUtils_1 = require(\"../controlledEnvironment/layoutUtils\");\nvar DragAndDropContext = React.createContext(null);\nvar useDragAndDrop = function () { return React.useContext(DragAndDropContext); };\nexports.useDragAndDrop = useDragAndDrop;\nvar DragAndDropProvider = function (_a) {\n    var children = _a.children;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var _b = (0, react_1.useState)(false), isProgrammaticallyDragging = _b[0], setIsProgrammaticallyDragging = _b[1];\n    var _c = (0, react_1.useState)({}), viableDragPositions = _c[0], setViableDragPositions = _c[1];\n    var _d = (0, react_1.useState)(0), programmaticDragIndex = _d[0], setProgrammaticDragIndex = _d[1];\n    var _e = (0, react_1.useState)(), draggingPosition = _e[0], setDraggingPosition = _e[1];\n    var getViableDragPositions = (0, useGetViableDragPositions_1.useGetViableDragPositions)();\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\n    var getOriginalItemOrder = (0, useGetOriginalItemOrder_1.useGetOriginalItemOrder)();\n    var _f = (0, useDraggingPosition_1.useDraggingPosition)(), initiateDraggingPosition = _f.initiateDraggingPosition, resetDraggingPosition = _f.resetDraggingPosition, draggingItems = _f.draggingItems, getDraggingPosition = _f.getDraggingPosition, itemHeight = _f.itemHeight;\n    var resetProgrammaticDragIndexForCurrentTree = (0, react_1.useCallback)(function (viableDragPositions, draggingItems) {\n        var _a;\n        if (environment.activeTreeId &&\n            ((_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.focusedItem) &&\n            environment.linearItems &&\n            draggingItems) {\n            var focusItem_1 = environment.viewState[environment.activeTreeId].focusedItem;\n            var treeDragPositions = getViableDragPositions(environment.activeTreeId, draggingItems);\n            var newPos = treeDragPositions.findIndex(function (pos) {\n                if (pos.targetType === 'item') {\n                    return pos.targetItem === focusItem_1;\n                }\n                if (pos.targetType === 'between-items') {\n                    return (environment.items[pos.parentItem].children[pos.childIndex] ===\n                        focusItem_1);\n                }\n                return false;\n            });\n            if (newPos) {\n                setProgrammaticDragIndex(Math.min(newPos + 1, treeDragPositions.length - 1));\n            }\n            else {\n                setProgrammaticDragIndex(0);\n            }\n        }\n        else {\n            setProgrammaticDragIndex(0);\n        }\n    }, [\n        environment.activeTreeId,\n        environment.items,\n        environment.linearItems,\n        environment.viewState,\n        getViableDragPositions,\n    ]);\n    var resetState = (0, useStableHandler_1.useStableHandler)(function () {\n        setIsProgrammaticallyDragging(false);\n        setViableDragPositions({});\n        setProgrammaticDragIndex(0);\n        setDraggingPosition(undefined);\n        resetDraggingPosition();\n    });\n    (0, useSideEffect_1.useSideEffect)(function () {\n        if (environment.activeTreeId &&\n            environment.linearItems[environment.activeTreeId] &&\n            viableDragPositions[environment.activeTreeId]) {\n            resetProgrammaticDragIndexForCurrentTree(viableDragPositions[environment.activeTreeId], draggingItems);\n        }\n    }, [\n        draggingItems,\n        environment.activeTreeId,\n        environment.linearItems,\n        resetProgrammaticDragIndexForCurrentTree,\n        viableDragPositions,\n    ], [environment.activeTreeId]);\n    (0, useSideEffect_1.useSideEffect)(function () {\n        if (isProgrammaticallyDragging && environment.activeTreeId) {\n            setDraggingPosition(viableDragPositions[environment.activeTreeId][programmaticDragIndex]);\n        }\n    }, [\n        programmaticDragIndex,\n        environment.activeTreeId,\n        isProgrammaticallyDragging,\n        viableDragPositions,\n    ], [programmaticDragIndex, environment.activeTreeId]);\n    var canDropAt = (0, useCanDropAt_1.useCanDropAt)();\n    var performDrag = function (draggingPosition) {\n        var _a;\n        if (draggingItems && !canDropAt(draggingPosition, draggingItems)) {\n            return;\n        }\n        setDraggingPosition(draggingPosition);\n        environment.setActiveTree(draggingPosition.treeId);\n        if (draggingItems && environment.activeTreeId !== draggingPosition.treeId) {\n            // TODO maybe do only if draggingItems are different to selectedItems\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems.map(function (item) { return item.index; }), draggingPosition.treeId);\n        }\n    };\n    var onDragOverTreeHandler = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\n        if (!draggingItems)\n            return;\n        var newDraggingPosition = getDraggingPosition(e, treeId, containerRef);\n        if (!newDraggingPosition)\n            return;\n        if (newDraggingPosition === 'invalid') {\n            setDraggingPosition(undefined);\n            return;\n        }\n        performDrag(newDraggingPosition);\n    });\n    var onDragLeaveContainerHandler = (0, useStableHandler_1.useStableHandler)(function (e, containerRef) {\n        if (!containerRef.current)\n            return;\n        if ((0, layoutUtils_1.isOutsideOfContainer)(e, containerRef.current.getBoundingClientRect())) {\n            setDraggingPosition(undefined);\n        }\n    });\n    var onDropHandler = (0, useStableHandler_1.useStableHandler)(function () {\n        if (!draggingItems || !draggingPosition || !environment.onDrop) {\n            return;\n        }\n        environment.onDrop(draggingItems, draggingPosition);\n        callSoon(function () {\n            var _a;\n            (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems[0], draggingPosition.treeId);\n            resetState();\n        });\n    });\n    var onStartDraggingItems = (0, react_1.useCallback)(function (items, treeId) {\n        var treeViableDragPositions = (0, utils_1.buildMapForTrees)(environment.treeIds, function (treeId) { return getViableDragPositions(treeId, items); });\n        initiateDraggingPosition(treeId, items);\n        // TODO what if trees have different heights and drag target changes?\n        setViableDragPositions(treeViableDragPositions);\n        if (environment.activeTreeId) {\n            resetProgrammaticDragIndexForCurrentTree(treeViableDragPositions[environment.activeTreeId], items);\n        }\n    }, [\n        environment.activeTreeId,\n        environment.treeIds,\n        getViableDragPositions,\n        initiateDraggingPosition,\n        resetProgrammaticDragIndexForCurrentTree,\n    ]);\n    var startProgrammaticDrag = (0, react_1.useCallback)(function () {\n        var _a, _b, _c;\n        if (!environment.canDragAndDrop) {\n            return;\n        }\n        if (environment.activeTreeId) {\n            var draggingItems_1 = (_b = (_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) !== null && _b !== void 0 ? _b : [\n                (_c = environment.viewState[environment.activeTreeId]) === null || _c === void 0 ? void 0 : _c.focusedItem,\n            ];\n            if (draggingItems_1.length === 0 || draggingItems_1[0] === undefined) {\n                return;\n            }\n            var resolvedDraggingItems = getOriginalItemOrder(environment.activeTreeId, draggingItems_1.map(function (id) { return environment.items[id]; }));\n            if (environment.canDrag && !environment.canDrag(resolvedDraggingItems)) {\n                return;\n            }\n            onStartDraggingItems(resolvedDraggingItems, environment.activeTreeId);\n            setTimeout(function () {\n                setIsProgrammaticallyDragging(true);\n                // Needs to be done after onStartDraggingItems was called, so that viableDragPositions is populated\n            });\n        }\n    }, [environment, getOriginalItemOrder, onStartDraggingItems]);\n    var abortProgrammaticDrag = (0, react_1.useCallback)(function () {\n        resetState();\n    }, [resetState]);\n    var completeProgrammaticDrag = (0, react_1.useCallback)(function () {\n        onDropHandler();\n        resetState();\n    }, [onDropHandler, resetState]);\n    var programmaticDragUp = (0, react_1.useCallback)(function () {\n        setProgrammaticDragIndex(function (oldIndex) { return Math.max(0, oldIndex - 1); });\n    }, []);\n    var programmaticDragDown = (0, react_1.useCallback)(function () {\n        if (environment.activeTreeId) {\n            setProgrammaticDragIndex(function (oldIndex) {\n                return Math.min(viableDragPositions[environment.activeTreeId].length - 1, oldIndex + 1);\n            });\n        }\n    }, [environment.activeTreeId, viableDragPositions]);\n    var dnd = (0, react_1.useMemo)(function () { return ({\n        onStartDraggingItems: onStartDraggingItems,\n        startProgrammaticDrag: startProgrammaticDrag,\n        abortProgrammaticDrag: abortProgrammaticDrag,\n        completeProgrammaticDrag: completeProgrammaticDrag,\n        programmaticDragUp: programmaticDragUp,\n        programmaticDragDown: programmaticDragDown,\n        draggingItems: draggingItems,\n        draggingPosition: draggingPosition,\n        itemHeight: itemHeight.current,\n        isProgrammaticallyDragging: isProgrammaticallyDragging,\n        onDragOverTreeHandler: onDragOverTreeHandler,\n        onDragLeaveContainerHandler: onDragLeaveContainerHandler,\n        viableDragPositions: viableDragPositions,\n    }); }, [\n        abortProgrammaticDrag,\n        completeProgrammaticDrag,\n        draggingItems,\n        draggingPosition,\n        isProgrammaticallyDragging,\n        itemHeight,\n        onDragOverTreeHandler,\n        onDragLeaveContainerHandler,\n        onStartDraggingItems,\n        programmaticDragDown,\n        programmaticDragUp,\n        startProgrammaticDrag,\n        viableDragPositions,\n    ]);\n    (0, react_1.useEffect)(function () {\n        window.addEventListener('dragend', resetState);\n        window.addEventListener('drop', onDropHandler);\n        return function () {\n            window.removeEventListener('dragend', resetState);\n            window.removeEventListener('drop', onDropHandler);\n        };\n    }, [onDropHandler, resetState]);\n    return (React.createElement(DragAndDropContext.Provider, { value: dnd }, children));\n};\nexports.DragAndDropProvider = DragAndDropProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DraggingPositionEvaluation = void 0;\nvar DraggingPositionEvaluation = /** @class */ (function () {\n    function DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem) {\n        this.env = env;\n        this.e = e;\n        this.treeId = treeId;\n        this.linearIndex = hoveringPosition.linearIndex;\n        this.offset = hoveringPosition.offset;\n        this.indentation = hoveringPosition.indentation;\n        this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\n        this.getParentOfLinearItem = getParentOfLinearItem;\n        this.draggingItems = draggingItems;\n    }\n    DraggingPositionEvaluation.prototype.getEmptyTreeDragPosition = function () {\n        return {\n            targetType: 'root',\n            treeId: this.treeId,\n            depth: 0,\n            linearIndex: 0,\n            targetItem: this.env.trees[this.treeId].rootItem,\n        };\n    };\n    /**\n     * If reordering is not allowed, dragging on non-folder items redirects\n     * the drag target to the parent of the target item.\n     */\n    DraggingPositionEvaluation.prototype.maybeRedirectToParent = function () {\n        var redirectTargetToParent = !this.env.canReorderItems &&\n            !this.env.canDropOnNonFolder &&\n            !this.env.items[this.targetItem.item].isFolder;\n        if (redirectTargetToParent) {\n            var _a = this.getParentOfLinearItem(this.linearIndex, this.treeId), parentLinearIndex = _a.parentLinearIndex, parent_1 = _a.parent;\n            this.targetItem = parent_1;\n            this.linearIndex = parentLinearIndex;\n        }\n    };\n    /**\n     * If the item is the last in a group, and the drop is at the bottom,\n     * the x-coordinate of the mouse allows to reparent upwards.\n     */\n    DraggingPositionEvaluation.prototype.maybeReparentUpwards = function () {\n        var _a, _b;\n        if (this.indentation === undefined) {\n            return undefined;\n        }\n        var treeLinearItems = this.env.linearItems[this.treeId];\n        var deepestDepth = treeLinearItems[this.linearIndex].depth;\n        // Default to zero on last position to allow dropping on root when\n        // dropping at bottom\n        var legalDropDepthCount = // itemDepthDifferenceToNextItem/isLastInGroup\n         deepestDepth - ((_b = (_a = treeLinearItems[this.linearIndex + 1]) === null || _a === void 0 ? void 0 : _a.depth) !== null && _b !== void 0 ? _b : 0);\n        var canReparentUpwards = this.offset === 'bottom' && legalDropDepthCount > 0;\n        if (!canReparentUpwards) {\n            return undefined;\n        }\n        var droppingIndent = Math.max(deepestDepth - legalDropDepthCount, this.indentation);\n        var newParent = {\n            parentLinearIndex: this.linearIndex,\n            parent: this.targetItem,\n        };\n        var insertionItemAbove;\n        for (var i = deepestDepth; i >= droppingIndent; i -= 1) {\n            insertionItemAbove = newParent;\n            newParent = this.getParentOfLinearItem(newParent.parentLinearIndex, this.treeId);\n        }\n        if (this.indentation === treeLinearItems[this.linearIndex].depth) {\n            return undefined;\n        }\n        if (!insertionItemAbove) {\n            return undefined;\n        }\n        var reparentedChildIndex = this.env.items[newParent.parent.item].children.indexOf(insertionItemAbove.parent.item) + 1;\n        if (this.draggingItems &&\n            this.isDescendant(this.treeId, newParent.parentLinearIndex + 1, this.draggingItems)) {\n            return undefined;\n        }\n        return {\n            targetType: 'between-items',\n            treeId: this.treeId,\n            parentItem: newParent.parent.item,\n            depth: droppingIndent,\n            linearIndex: this.linearIndex + 1,\n            childIndex: reparentedChildIndex,\n            linePosition: 'bottom',\n        };\n    };\n    /**\n     * Don't allow to drop at bottom of an open folder, since that will place\n     * it visually at a different position. Redirect the drag target to the\n     * top of the folder contents in that case.\n     */\n    DraggingPositionEvaluation.prototype.maybeRedirectInsideOpenFolder = function () {\n        var nextItem = this.env.linearItems[this.treeId][this.linearIndex + 1];\n        var redirectInsideOpenFolder = !this.env.canDropBelowOpenFolders &&\n            nextItem &&\n            this.targetItem.depth === nextItem.depth - 1 &&\n            this.offset === 'bottom';\n        if (redirectInsideOpenFolder) {\n            this.targetItem = nextItem;\n            this.linearIndex += 1;\n            this.offset = 'top';\n        }\n    };\n    /**\n     * Inside a folder, only drop at bottom offset to make it visually\n     * consistent. This also maps to bottom offset for items below open\n     * subtrees, to keep the x-coordinate based dropping consistent (only\n     * if indentation is defined).\n     */\n    DraggingPositionEvaluation.prototype.maybeMapToBottomOffset = function () {\n        var priorItem = this.env.linearItems[this.treeId][this.linearIndex - 1];\n        if (!priorItem || (priorItem === null || priorItem === void 0 ? void 0 : priorItem.depth) === undefined)\n            return;\n        var depthDistanceToPrior = priorItem.depth - this.targetItem.depth;\n        if (this.offset === 'top' &&\n            (depthDistanceToPrior === 0 ||\n                (depthDistanceToPrior > 0 && this.indentation !== undefined))) {\n            this.offset = 'bottom';\n            this.linearIndex -= 1;\n            this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\n        }\n    };\n    DraggingPositionEvaluation.prototype.canDropAtCurrentTarget = function () {\n        var _this = this;\n        var _a;\n        var targetItemData = this.env.items[this.targetItem.item];\n        if (!this.offset &&\n            !this.env.canDropOnNonFolder &&\n            !targetItemData.isFolder) {\n            return false;\n        }\n        if (!this.offset && !this.env.canDropOnFolder && targetItemData.isFolder) {\n            return false;\n        }\n        if (this.offset && !this.env.canReorderItems) {\n            return false;\n        }\n        if ((_a = this.draggingItems) === null || _a === void 0 ? void 0 : _a.some(function (draggingItem) { return draggingItem.index === _this.targetItem.item; })) {\n            return false;\n        }\n        return true;\n    };\n    DraggingPositionEvaluation.prototype.getDraggingPosition = function () {\n        if (this.env.linearItems[this.treeId].length === 0) {\n            return this.getEmptyTreeDragPosition();\n        }\n        if (!this.draggingItems ||\n            this.linearIndex < 0 ||\n            this.linearIndex >= this.env.linearItems[this.treeId].length) {\n            return undefined;\n        }\n        this.maybeRedirectToParent();\n        this.maybeRedirectInsideOpenFolder();\n        this.maybeMapToBottomOffset();\n        var reparented = this.maybeReparentUpwards();\n        if (reparented) {\n            return reparented;\n        }\n        if (this.areDraggingItemsDescendantOfTarget()) {\n            return 'invalid';\n        }\n        if (!this.canDropAtCurrentTarget()) {\n            return 'invalid';\n        }\n        var parent = this.getParentOfLinearItem(this.linearIndex, this.treeId).parent;\n        var newChildIndex = this.env.items[parent.item].children.indexOf(this.targetItem.item) +\n            (this.offset === 'top' ? 0 : 1);\n        if (this.offset) {\n            return {\n                targetType: 'between-items',\n                treeId: this.treeId,\n                parentItem: parent.item,\n                depth: this.targetItem.depth,\n                linearIndex: this.linearIndex + (this.offset === 'top' ? 0 : 1),\n                childIndex: newChildIndex,\n                linePosition: this.offset,\n            };\n        }\n        return {\n            targetType: 'item',\n            treeId: this.treeId,\n            parentItem: parent.item,\n            targetItem: this.targetItem.item,\n            depth: this.targetItem.depth,\n            linearIndex: this.linearIndex,\n        };\n    };\n    DraggingPositionEvaluation.prototype.isDescendant = function (treeId, itemLinearIndex, potentialParents) {\n        // console.log('descendant check', itemLinearIndex, potentialParents);\n        var _a = this.getParentOfLinearItem(itemLinearIndex, treeId), parentLinearIndex = _a.parentLinearIndex, parent = _a.parent;\n        if (potentialParents.some(function (p) { return p.index === parent.item; })) {\n            return true;\n        }\n        if (parent.depth === 0) {\n            return false;\n        }\n        return this.isDescendant(treeId, parentLinearIndex, potentialParents);\n    };\n    DraggingPositionEvaluation.prototype.areDraggingItemsDescendantOfTarget = function () {\n        return (this.draggingItems &&\n            this.isDescendant(this.treeId, this.linearIndex, this.draggingItems));\n    };\n    return DraggingPositionEvaluation;\n}());\nexports.DraggingPositionEvaluation = DraggingPositionEvaluation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCanDropAt = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useCanDropAt = function () {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    return (0, react_1.useCallback)(function (draggingPosition, draggingItems) {\n        if (draggingPosition.targetType === 'between-items') {\n            if (!environment.canReorderItems) {\n                return false;\n            }\n        }\n        else if (draggingPosition.targetType === 'root') {\n            if (!environment.canDropOnFolder) {\n                return false;\n            }\n        }\n        else {\n            var resolvedItem = environment.items[draggingPosition.targetItem];\n            if (!resolvedItem ||\n                (!environment.canDropOnFolder && resolvedItem.isFolder) ||\n                (!environment.canDropOnNonFolder && !resolvedItem.isFolder) ||\n                draggingItems.some(function (draggingItem) { return draggingItem.index === draggingPosition.targetItem; })) {\n                return false;\n            }\n        }\n        if (environment.canDropAt &&\n            (!draggingItems ||\n                !environment.canDropAt(draggingItems, draggingPosition))) {\n            // setDraggingPosition(undefined);\n            return false;\n        }\n        return true;\n    }, [environment]);\n};\nexports.useCanDropAt = useCanDropAt;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useDraggingPosition = void 0;\nvar react_1 = require(\"react\");\nvar layoutUtils_1 = require(\"../controlledEnvironment/layoutUtils\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useStableHandler_1 = require(\"../useStableHandler\");\nvar DraggingPositionEvaluation_1 = require(\"./DraggingPositionEvaluation\");\nvar useGetParentOfLinearItem_1 = require(\"./useGetParentOfLinearItem\");\nvar useDraggingPosition = function () {\n    var dragCode = (0, react_1.useRef)('initial');\n    var _a = (0, react_1.useState)(undefined), draggingItems = _a[0], setDraggingItems = _a[1];\n    var itemHeight = (0, react_1.useRef)(0);\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var getParentOfLinearItem = (0, useGetParentOfLinearItem_1.useGetGetParentOfLinearItem)();\n    var isNewDragPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, hoveringPosition) {\n        if (!hoveringPosition) {\n            return false;\n        }\n        var offset = hoveringPosition.offset, linearIndex = hoveringPosition.linearIndex;\n        var newDragCode = \"\".concat(treeId, \"__\").concat(linearIndex, \"__\").concat(offset !== null && offset !== void 0 ? offset : '', \"__\").concat(hoveringPosition.indentation);\n        if (newDragCode !== dragCode.current) {\n            dragCode.current = newDragCode;\n            return true;\n        }\n        return false;\n    });\n    /**\n     * Returns undefined for invalid drop targets, like outside the tree.\n     */\n    var getHoveringPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\n        if (!containerRef.current) {\n            return undefined;\n        }\n        var treeBb = containerRef.current.getBoundingClientRect();\n        if ((0, layoutUtils_1.isOutsideOfContainer)(e, treeBb)) {\n            return undefined;\n        }\n        var hoveringPosition = (e.clientY - treeBb.top) / itemHeight.current;\n        var treeLinearItems = env.linearItems[treeId];\n        var linearIndex = Math.min(Math.max(0, Math.floor(hoveringPosition)), treeLinearItems.length - 1);\n        if (treeLinearItems.length === 0) {\n            return {\n                linearIndex: 0,\n                offset: 'bottom',\n                indentation: 0,\n            };\n        }\n        var targetLinearItem = treeLinearItems[linearIndex];\n        var targetItem = env.items[targetLinearItem.item];\n        var indentation = !env.renderDepthOffset\n            ? undefined\n            : Math.max(Math.floor((e.clientX - treeBb.left) / env.renderDepthOffset), 0);\n        var offset;\n        var lineThreshold = !env.canReorderItems\n            ? 0\n            : ((targetItem === null || targetItem === void 0 ? void 0 : targetItem.isFolder) && env.canDropOnFolder) ||\n                env.canDropOnNonFolder\n                ? 0.2\n                : 0.5;\n        if (hoveringPosition - 0.5 >= treeLinearItems.length - 1) {\n            // very bottom, always use offset \"bottom\"\n            offset = 'bottom';\n        }\n        else if (hoveringPosition % 1 < lineThreshold) {\n            offset = 'top';\n        }\n        else if (hoveringPosition % 1 > 1 - lineThreshold) {\n            offset = 'bottom';\n        }\n        return { linearIndex: linearIndex, offset: offset, indentation: indentation };\n    });\n    // returning undefined means calling onDragAtPosition(undefined), returning a dropposition means calling onPerformDrag(dropposition)\n    // TODO old function sometimes returned undefined when old state could be kept; is it okay to also return undefined to enter invalid drop state here? e.g. !this.draggingItems, !canDragAndDrop...\n    var getDraggingPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\n        var hoveringPosition = getHoveringPosition(e, treeId, containerRef);\n        if (!isNewDragPosition(e, treeId, hoveringPosition)) {\n            return undefined;\n        }\n        if (!draggingItems ||\n            !env.canDragAndDrop ||\n            !hoveringPosition ||\n            e.clientX < 0 ||\n            e.clientY < 0) {\n            return 'invalid';\n        }\n        return new DraggingPositionEvaluation_1.DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem).getDraggingPosition();\n    });\n    var initiateDraggingPosition = (0, useStableHandler_1.useStableHandler)(function (treeId, items) {\n        setDraggingItems(items);\n        dragCode.current = 'initial';\n        itemHeight.current = (0, layoutUtils_1.computeItemHeight)(treeId);\n    });\n    var resetDraggingPosition = (0, useStableHandler_1.useStableHandler)(function () {\n        setDraggingItems(undefined);\n        dragCode.current = 'initial';\n        itemHeight.current = 0;\n    });\n    return {\n        initiateDraggingPosition: initiateDraggingPosition,\n        resetDraggingPosition: resetDraggingPosition,\n        draggingItems: draggingItems,\n        getDraggingPosition: getDraggingPosition,\n        itemHeight: itemHeight,\n    };\n};\nexports.useDraggingPosition = useDraggingPosition;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGetGetParentOfLinearItem = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useGetGetParentOfLinearItem = function () {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    return (0, react_1.useCallback)(function (itemLinearIndex, treeId) {\n        var linearItems = environment.linearItems[treeId];\n        var depth = linearItems[itemLinearIndex].depth;\n        var parentLinearIndex = itemLinearIndex;\n        for (; !!linearItems[parentLinearIndex] &&\n            linearItems[parentLinearIndex].depth !== depth - 1; parentLinearIndex -= 1)\n            ;\n        var parent = linearItems[parentLinearIndex];\n        if (!parent) {\n            parent = { item: environment.trees[treeId].rootItem, depth: 0 };\n            parentLinearIndex = 0;\n        }\n        return { parent: parent, parentLinearIndex: parentLinearIndex };\n    }, [environment.linearItems, environment.trees]);\n};\nexports.useGetGetParentOfLinearItem = useGetGetParentOfLinearItem;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGetViableDragPositions = void 0;\n/* eslint-disable no-continue */\nvar react_1 = require(\"react\");\nvar useGetParentOfLinearItem_1 = require(\"./useGetParentOfLinearItem\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useCanDropAt_1 = require(\"./useCanDropAt\");\nvar useGetViableDragPositions = function () {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var getParentOfLinearItem = (0, useGetParentOfLinearItem_1.useGetGetParentOfLinearItem)();\n    var canDropAt = (0, useCanDropAt_1.useCanDropAt)();\n    var isDescendant = (0, react_1.useCallback)(function (treeId, itemLinearIndex, potentialParents) {\n        // based on DraggingPositionEvaluation.isDescendant()\n        var _a = getParentOfLinearItem(itemLinearIndex, treeId), parent = _a.parent, parentLinearIndex = _a.parentLinearIndex;\n        if (potentialParents.some(function (p) { return p.index === parent.item; }))\n            return true;\n        if (parent.depth === 0)\n            return false;\n        return isDescendant(treeId, parentLinearIndex, potentialParents);\n    }, [getParentOfLinearItem]);\n    return (0, react_1.useCallback)(function (treeId, draggingItems) {\n        var _a, _b, _c, _d;\n        var linearItems = environment.linearItems[treeId];\n        var targets = [];\n        var skipUntilDepthIsLowerThan = -1;\n        for (var linearIndex = 0; linearIndex < linearItems.length; \n        // eslint-disable-next-line no-plusplus\n        linearIndex++) {\n            var _e = linearItems[linearIndex], item = _e.item, depth = _e.depth;\n            if (skipUntilDepthIsLowerThan !== -1 &&\n                depth > skipUntilDepthIsLowerThan) {\n                continue;\n            }\n            else {\n                skipUntilDepthIsLowerThan = -1;\n            }\n            var parent_1 = getParentOfLinearItem(linearIndex, treeId).parent;\n            var childIndex = environment.items[parent_1.item].children.indexOf(item);\n            if (isDescendant(treeId, linearIndex, draggingItems)) {\n                skipUntilDepthIsLowerThan = depth + 1;\n                continue;\n            }\n            var itemPosition = {\n                targetType: 'item',\n                parentItem: parent_1.item,\n                targetItem: item,\n                linearIndex: linearIndex,\n                depth: depth,\n                treeId: treeId,\n            };\n            var topPosition = {\n                targetType: 'between-items',\n                parentItem: parent_1.item,\n                linePosition: 'top',\n                childIndex: childIndex,\n                depth: depth,\n                treeId: treeId,\n                linearIndex: linearIndex,\n            };\n            var bottomPosition = {\n                targetType: 'between-items',\n                parentItem: parent_1.item,\n                linePosition: 'bottom',\n                linearIndex: linearIndex + 1,\n                childIndex: childIndex + 1,\n                depth: depth,\n                treeId: treeId,\n            };\n            var depthOfItemAbove = (_b = (_a = linearItems[linearIndex - 1]) === null || _a === void 0 ? void 0 : _a.depth) !== null && _b !== void 0 ? _b : -1;\n            var depthOfItemBelow = (_d = (_c = linearItems[linearIndex + 1]) === null || _c === void 0 ? void 0 : _c.depth) !== null && _d !== void 0 ? _d : -1;\n            var isWithinFolder = depth === depthOfItemAbove;\n            var isBelowOpenFolder = depth === depthOfItemBelow - 1;\n            if (!isWithinFolder && canDropAt(topPosition, draggingItems)) {\n                targets.push(topPosition);\n            }\n            if (canDropAt(itemPosition, draggingItems)) {\n                targets.push(itemPosition);\n            }\n            if (!isBelowOpenFolder && canDropAt(bottomPosition, draggingItems)) {\n                targets.push(bottomPosition);\n            }\n        }\n        return targets;\n    }, [\n        canDropAt,\n        environment.items,\n        environment.linearItems,\n        getParentOfLinearItem,\n        isDescendant,\n    ]);\n};\nexports.useGetViableDragPositions = useGetViableDragPositions;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EnvironmentActionsProvider = exports.useEnvironmentActions = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useCreatedEnvironmentRef_1 = require(\"./useCreatedEnvironmentRef\");\nvar useRefCopy_1 = require(\"../useRefCopy\");\nvar waitFor_1 = require(\"../waitFor\");\nvar EnvironmentActionsContext = React.createContext(null);\nvar useEnvironmentActions = function () {\n    return React.useContext(EnvironmentActionsContext);\n};\nexports.useEnvironmentActions = useEnvironmentActions;\nvar recursiveExpand = function (itemId, items, onExpand) { return __awaiter(void 0, void 0, void 0, function () {\n    var _loop_1, _i, _a, childId;\n    var _b, _c, _d;\n    return __generator(this, function (_e) {\n        _loop_1 = function (childId) {\n            (0, waitFor_1.waitFor)(function () { var _a; return !!((_a = items.current) === null || _a === void 0 ? void 0 : _a[childId]); }).then(function () {\n                var _a;\n                var item = (_a = items.current) === null || _a === void 0 ? void 0 : _a[childId];\n                if (item === null || item === void 0 ? void 0 : item.isFolder) {\n                    onExpand(item);\n                    recursiveExpand(childId, items, onExpand);\n                }\n            });\n        };\n        for (_i = 0, _a = (_d = (_c = (_b = items.current) === null || _b === void 0 ? void 0 : _b[itemId]) === null || _c === void 0 ? void 0 : _c.children) !== null && _d !== void 0 ? _d : []; _i < _a.length; _i++) {\n            childId = _a[_i];\n            _loop_1(childId);\n        }\n        return [2 /*return*/];\n    });\n}); };\nexports.EnvironmentActionsProvider = React.forwardRef(function (props, ref) {\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), onCollapseItem = _a.onCollapseItem, items = _a.items, trees = _a.trees, viewState = _a.viewState, onExpandItem = _a.onExpandItem, onFocusItem = _a.onFocusItem, setActiveTree = _a.setActiveTree, onRenameItem = _a.onRenameItem, onSelectItems = _a.onSelectItems, onPrimaryAction = _a.onPrimaryAction, linearItems = _a.linearItems;\n    var _b = (0, DragAndDropProvider_1.useDragAndDrop)(), abortProgrammaticDrag = _b.abortProgrammaticDrag, completeProgrammaticDrag = _b.completeProgrammaticDrag, programmaticDragDown = _b.programmaticDragDown, programmaticDragUp = _b.programmaticDragUp, startProgrammaticDrag = _b.startProgrammaticDrag;\n    var itemsRef = (0, useRefCopy_1.useRefCopy)(items);\n    // TODO replace callbacks with stable handlers\n    var collapseItem = (0, react_1.useCallback)(function (itemId, treeId) {\n        onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n    }, [items, onCollapseItem]);\n    var expandItem = (0, react_1.useCallback)(function (itemId, treeId) {\n        onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\n    }, [items, onExpandItem]);\n    var focusItem = (0, react_1.useCallback)(function (itemId, treeId, setDomFocus) {\n        if (setDomFocus === void 0) { setDomFocus = true; }\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[itemId], treeId, setDomFocus);\n    }, [items, onFocusItem]);\n    var focusTree = (0, react_1.useCallback)(function (treeId, autoFocus) {\n        if (autoFocus === void 0) { autoFocus = true; }\n        setActiveTree(treeId, autoFocus);\n    }, [setActiveTree]);\n    var moveFocusDown = (0, react_1.useCallback)(function (treeId) {\n        var treeLinearItems = linearItems[treeId];\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\n            var _b;\n            var item = _a.item;\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\n        });\n        var newIndex = currentFocusIndex !== undefined\n            ? Math.min(treeLinearItems.length - 1, currentFocusIndex + 1)\n            : 0;\n        var newItem = items[treeLinearItems[newIndex].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\n    }, [items, linearItems, onFocusItem, viewState]);\n    var moveFocusUp = (0, react_1.useCallback)(function (treeId) {\n        var treeLinearItems = linearItems[treeId];\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\n            var _b;\n            var item = _a.item;\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\n        });\n        var newIndex = currentFocusIndex !== undefined\n            ? Math.max(0, currentFocusIndex - 1)\n            : 0;\n        var newItem = items[treeLinearItems[newIndex].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\n    }, [items, linearItems, onFocusItem, viewState]);\n    var renameItem = (0, react_1.useCallback)(function (itemId, name, treeId) {\n        onRenameItem === null || onRenameItem === void 0 ? void 0 : onRenameItem(items[itemId], name, treeId);\n    }, [items, onRenameItem]);\n    var selectItems = (0, react_1.useCallback)(function (itemsIds, treeId) {\n        onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(itemsIds, treeId);\n    }, [onSelectItems]);\n    var toggleItemExpandedState = (0, react_1.useCallback)(function (itemId, treeId) {\n        var _a, _b;\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n        }\n        else {\n            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\n        }\n    }, [items, onCollapseItem, onExpandItem, viewState]);\n    var toggleItemSelectStatus = (0, react_1.useCallback)(function (itemId, treeId) {\n        var _a, _b, _c, _d, _e;\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems((_d = (_c = viewState[treeId].selectedItems) === null || _c === void 0 ? void 0 : _c.filter(function (item) { return item !== itemId; })) !== null && _d !== void 0 ? _d : [], treeId);\n        }\n        else {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(__spreadArray(__spreadArray([], ((_e = viewState[treeId].selectedItems) !== null && _e !== void 0 ? _e : []), true), [itemId], false), treeId);\n        }\n    }, [onSelectItems, viewState]);\n    var invokePrimaryAction = (0, react_1.useCallback)(function (itemId, treeId) {\n        onPrimaryAction === null || onPrimaryAction === void 0 ? void 0 : onPrimaryAction(items[itemId], treeId);\n    }, [items, onPrimaryAction]);\n    var expandSubsequently = (0, react_1.useCallback)(function (treeId, itemIds) { return __awaiter(void 0, void 0, void 0, function () {\n        var current, rest;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    current = itemIds[0], rest = itemIds.slice(1);\n                    return [4 /*yield*/, (0, waitFor_1.waitFor)(function () { var _a; return !!((_a = itemsRef.current) === null || _a === void 0 ? void 0 : _a[current]); }).then(function () {\n                            var item = itemsRef.current[current];\n                            if (!item) {\n                                return Promise.resolve();\n                            }\n                            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\n                            if (rest.length > 0) {\n                                return expandSubsequently(treeId, rest);\n                            }\n                            return Promise.resolve();\n                        })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [itemsRef, onExpandItem]);\n    var expandAll = (0, react_1.useCallback)(function (treeId) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, recursiveExpand(trees[treeId].rootItem, itemsRef, function (item) {\n                        return onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\n                    })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [itemsRef, onExpandItem, trees]);\n    var collapseAll = (0, react_1.useCallback)(function (treeId) {\n        var _a, _b;\n        for (var _i = 0, _c = (_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) !== null && _b !== void 0 ? _b : []; _i < _c.length; _i++) {\n            var itemId = _c[_i];\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\n        }\n    }, [items, onCollapseItem, viewState]);\n    // TODO change environment childs to use actions rather than output events where possible\n    var actions = (0, react_1.useMemo)(function () { return ({\n        collapseItem: collapseItem,\n        expandItem: expandItem,\n        focusItem: focusItem,\n        focusTree: focusTree,\n        moveFocusDown: moveFocusDown,\n        moveFocusUp: moveFocusUp,\n        renameItem: renameItem,\n        selectItems: selectItems,\n        toggleItemExpandedState: toggleItemExpandedState,\n        toggleItemSelectStatus: toggleItemSelectStatus,\n        invokePrimaryAction: invokePrimaryAction,\n        expandAll: expandAll,\n        expandSubsequently: expandSubsequently,\n        collapseAll: collapseAll,\n        abortProgrammaticDrag: abortProgrammaticDrag,\n        completeProgrammaticDrag: completeProgrammaticDrag,\n        moveProgrammaticDragPositionDown: programmaticDragDown,\n        moveProgrammaticDragPositionUp: programmaticDragUp,\n        startProgrammaticDrag: startProgrammaticDrag,\n    }); }, [\n        collapseItem,\n        expandItem,\n        focusItem,\n        focusTree,\n        moveFocusDown,\n        moveFocusUp,\n        renameItem,\n        selectItems,\n        toggleItemExpandedState,\n        toggleItemSelectStatus,\n        invokePrimaryAction,\n        expandAll,\n        expandSubsequently,\n        collapseAll,\n        abortProgrammaticDrag,\n        completeProgrammaticDrag,\n        programmaticDragDown,\n        programmaticDragUp,\n        startProgrammaticDrag,\n    ]);\n    (0, useCreatedEnvironmentRef_1.useCreatedEnvironmentRef)(ref, actions);\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\n});\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCreatedEnvironmentRef = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar useCreatedEnvironmentRef = function (ref, actions) {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    (0, react_1.useImperativeHandle)(ref, function () { return (__assign(__assign(__assign({}, actions), environment), { treeEnvironmentContext: environment, dragAndDropContext: dnd })); });\n};\nexports.useCreatedEnvironmentRef = useCreatedEnvironmentRef;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultKeyboardBindings = void 0;\nexports.defaultKeyboardBindings = {\n    expandSiblings: ['control+*'],\n    moveFocusToFirstItem: ['home'],\n    moveFocusToLastItem: ['end'],\n    primaryAction: ['enter'],\n    renameItem: ['f2'],\n    abortRenameItem: ['escape'],\n    toggleSelectItem: ['control+ '],\n    abortSearch: ['escape', 'enter'],\n    startSearch: [],\n    selectAll: ['control+a'],\n    startProgrammaticDnd: ['control+shift+d'],\n    completeProgrammaticDnd: ['enter'],\n    abortProgrammaticDnd: ['escape'],\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useHotkey = void 0;\nvar react_1 = require(\"react\");\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\nvar useKeyboardBindings_1 = require(\"./useKeyboardBindings\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar utils_1 = require(\"../utils\");\nvar elementsThatCanTakeText = ['input', 'textarea'];\nvar useHotkey = function (combinationName, onHit, active, activatableWhileFocusingInput) {\n    if (activatableWhileFocusingInput === void 0) { activatableWhileFocusingInput = false; }\n    var pressedKeys = (0, react_1.useRef)([]);\n    var keyboardBindings = (0, useKeyboardBindings_1.useKeyboardBindings)();\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\n    var possibleCombinations = (0, react_1.useMemo)(function () {\n        return keyboardBindings[combinationName].map(function (combination) {\n            return combination.split('+');\n        });\n    }, [combinationName, keyboardBindings]);\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keydown', function (e) {\n        var _a;\n        if (active === false) {\n            return;\n        }\n        if ((elementsThatCanTakeText.includes((_a = e.target.tagName) === null || _a === void 0 ? void 0 : _a.toLowerCase()) ||\n            e.target.isContentEditable) &&\n            !activatableWhileFocusingInput) {\n            // Skip if an input is selected\n            return;\n        }\n        if (!pressedKeys.current.includes(e.key)) {\n            pressedKeys.current.push(e.key);\n            var pressedKeysLowercase_1 = pressedKeys.current.map(function (key) {\n                return key.toLowerCase();\n            });\n            var partialMatch = possibleCombinations\n                .map(function (combination) {\n                return pressedKeysLowercase_1\n                    .map(function (key) { return combination.includes(key.toLowerCase()); })\n                    .reduce(function (a, b) { return a && b; }, true);\n            })\n                .reduce(function (a, b) { return a || b; }, false);\n            if (partialMatch) {\n                if (pressedKeys.current.length > 1 || !/^[a-zA-Z\\s]$/.test(e.key)) {\n                    // Prevent default, but not if this is the first input and a letter (which should trigger a search)\n                    // also not on first input and spacebar, as that should trigger an item directly\n                    e.preventDefault();\n                }\n            }\n        }\n    });\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keyup', function (e) {\n        if (active === false) {\n            return;\n        }\n        var pressedKeysLowercase = pressedKeys.current.map(function (key) {\n            return key.toLowerCase();\n        });\n        var match = possibleCombinations\n            .map(function (combination) {\n            return combination\n                .map(function (key) { return pressedKeysLowercase.includes(key.toLowerCase()); })\n                .reduce(function (a, b) { return a && b; }, true);\n        })\n            .reduce(function (a, b) { return a || b; }, false);\n        if (match) {\n            callSoon(function () { return onHit(e); });\n        }\n        pressedKeys.current = pressedKeys.current.filter(function (key) { return key !== e.key; });\n    });\n};\nexports.useHotkey = useHotkey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useKey = void 0;\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\nvar utils_1 = require(\"../utils\");\nvar useKey = function (key, onHit, active) {\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keydown', function (e) {\n        if (!active) {\n            return;\n        }\n        if (active && key.toLowerCase() === e.key.toLowerCase()) {\n            onHit(e);\n        }\n    });\n};\nexports.useKey = useKey;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useKeyboardBindings = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar defaultKeyboardBindings_1 = require(\"./defaultKeyboardBindings\");\nvar useKeyboardBindings = function () {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    return (0, react_1.useMemo)(function () {\n        if (environment.keyboardBindings) {\n            return __assign(__assign({}, defaultKeyboardBindings_1.defaultKeyboardBindings), environment.keyboardBindings);\n        }\n        return defaultKeyboardBindings_1.defaultKeyboardBindings;\n    }, [environment.keyboardBindings]);\n};\nexports.useKeyboardBindings = useKeyboardBindings;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INTERNALS = void 0;\nvar TreeItemElement_1 = require(\"./treeItem/TreeItemElement\");\nvar TreeItemChildren_1 = require(\"./treeItem/TreeItemChildren\");\n__exportStar(require(\"./controlledEnvironment/ControlledTreeEnvironment\"), exports);\n__exportStar(require(\"./tree/Tree\"), exports);\n__exportStar(require(\"./uncontrolledEnvironment/UncontrolledTreeEnvironment\"), exports);\n__exportStar(require(\"./uncontrolledEnvironment/StaticTreeDataProvider\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./renderers\"), exports);\n__exportStar(require(\"./treeItem/useTreeItemRenderContext\"), exports);\n__exportStar(require(\"./controlledEnvironment/useControlledTreeEnvironmentProps\"), exports);\nexports.INTERNALS = {\n    TreeItemElement: TreeItemElement_1.TreeItemElement,\n    TreeItemChildren: TreeItemChildren_1.TreeItemChildren,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClickArrowToExpandInteractionManager = void 0;\nvar types_1 = require(\"../types\");\nvar isControlKey_1 = require(\"../isControlKey\");\nvar ClickArrowToExpandInteractionManager = /** @class */ (function () {\n    function ClickArrowToExpandInteractionManager(environment) {\n        this.mode = types_1.InteractionMode.ClickItemToExpand;\n        this.environment = environment;\n    }\n    ClickArrowToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                var isSpacebarEvent = e.detail === 0;\n                actions.focusItem();\n                if (e.shiftKey && !isSpacebarEvent) {\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\n                }\n                else if ((0, isControlKey_1.isControlKey)(e) && !isSpacebarEvent) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    actions.selectItem();\n                    if (!item.isFolder ||\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\n                        actions.primaryAction();\n                    }\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return ClickArrowToExpandInteractionManager;\n}());\nexports.ClickArrowToExpandInteractionManager = ClickArrowToExpandInteractionManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClickItemToExpandInteractionManager = void 0;\nvar types_1 = require(\"../types\");\nvar isControlKey_1 = require(\"../isControlKey\");\nvar ClickItemToExpandInteractionManager = /** @class */ (function () {\n    function ClickItemToExpandInteractionManager(environment) {\n        this.mode = types_1.InteractionMode.ClickItemToExpand;\n        this.environment = environment;\n    }\n    ClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                var isSpacebarEvent = e.detail === 0;\n                actions.focusItem();\n                if (e.shiftKey && !isSpacebarEvent) {\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\n                }\n                else if ((0, isControlKey_1.isControlKey)(e) && !isSpacebarEvent) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    if (item.isFolder) {\n                        actions.toggleExpandedState();\n                    }\n                    actions.selectItem();\n                    if (!item.isFolder ||\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\n                        actions.primaryAction();\n                    }\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return ClickItemToExpandInteractionManager;\n}());\nexports.ClickItemToExpandInteractionManager = ClickItemToExpandInteractionManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DoubleClickItemToExpandInteractionManager = void 0;\nvar types_1 = require(\"../types\");\nvar isControlKey_1 = require(\"../isControlKey\");\nvar DoubleClickItemToExpandInteractionManager = /** @class */ (function () {\n    function DoubleClickItemToExpandInteractionManager(environment) {\n        this.mode = types_1.InteractionMode.DoubleClickItemToExpand;\n        this.environment = environment;\n    }\n    DoubleClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\n        var _this = this;\n        return {\n            onClick: function (e) {\n                var isSpacebarEvent = e.detail === 0;\n                actions.focusItem();\n                if (e.shiftKey && !isSpacebarEvent) {\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\n                }\n                else if ((0, isControlKey_1.isControlKey)(e) && !isSpacebarEvent) {\n                    if (renderFlags.isSelected) {\n                        actions.unselectItem();\n                    }\n                    else {\n                        actions.addToSelectedItems();\n                    }\n                }\n                else {\n                    actions.selectItem();\n                }\n            },\n            onDoubleClick: function () {\n                actions.focusItem();\n                actions.selectItem();\n                if (item.isFolder) {\n                    actions.toggleExpandedState();\n                }\n                if (!item.isFolder ||\n                    _this.environment.canInvokePrimaryActionOnItemContainer) {\n                    actions.primaryAction();\n                }\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragStart: function (e) {\n                e.dataTransfer.dropEffect = 'move';\n                actions.startDragging();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\n            tabIndex: !renderFlags.isRenaming\n                ? renderFlags.isFocused\n                    ? 0\n                    : -1\n                : undefined,\n        };\n    };\n    return DoubleClickItemToExpandInteractionManager;\n}());\nexports.DoubleClickItemToExpandInteractionManager = DoubleClickItemToExpandInteractionManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isControlKey = void 0;\nvar isControlKey = function (e) {\n    return e.ctrlKey ||\n        (navigator.platform.toUpperCase().indexOf('MAC') >= 0 && e.metaKey);\n};\nexports.isControlKey = isControlKey;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDefaultRenderers = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar cx = function () {\n    var classNames = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        classNames[_i] = arguments[_i];\n    }\n    return classNames.filter(function (cn) { return !!cn; }).join(' ');\n};\nvar createDefaultRenderers = function (renderDepthOffset, rtl) { return ({\n    renderItemTitle: function (_a) {\n        var title = _a.title, context = _a.context, info = _a.info;\n        if (!info.isSearching || !context.isSearchMatching) {\n            return title;\n        }\n        var startIndex = title.toLowerCase().indexOf(info.search.toLowerCase());\n        return (react_1.default.createElement(react_1.default.Fragment, null,\n            startIndex > 0 && react_1.default.createElement(\"span\", null, title.slice(0, startIndex)),\n            react_1.default.createElement(\"span\", { className: \"rct-tree-item-search-highlight\" }, title.slice(startIndex, startIndex + info.search.length)),\n            startIndex + info.search.length < title.length && (react_1.default.createElement(\"span\", null, title.slice(startIndex + info.search.length, title.length)))));\n    },\n    renderItemArrow: function (_a) {\n        var item = _a.item, context = _a.context;\n        return (\n        // Icons from https://blueprintjs.com/docs/#icons\n        react_1.default.createElement(\"div\", __assign({ className: cx(item.isFolder && 'rct-tree-item-arrow-isFolder', context.isExpanded && 'rct-tree-item-arrow-expanded', 'rct-tree-item-arrow') }, context.arrowProps), item.isFolder &&\n            (context.isExpanded ? (react_1.default.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\n                react_1.default.createElement(\"g\", null,\n                    react_1.default.createElement(\"g\", null,\n                        react_1.default.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))) : (react_1.default.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\n                react_1.default.createElement(\"g\", null,\n                    react_1.default.createElement(\"g\", null,\n                        react_1.default.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))))));\n    },\n    renderItem: function (_a) {\n        var item = _a.item, depth = _a.depth, children = _a.children, title = _a.title, context = _a.context, arrow = _a.arrow;\n        var InteractiveComponent = context.isRenaming ? 'div' : 'button';\n        var type = context.isRenaming ? undefined : 'button';\n        // TODO have only root li component create all the classes\n        return (react_1.default.createElement(\"li\", __assign({}, context.itemContainerWithChildrenProps, { className: cx('rct-tree-item-li', item.isFolder && 'rct-tree-item-li-isFolder', context.isSelected && 'rct-tree-item-li-selected', context.isExpanded && 'rct-tree-item-li-expanded', context.isFocused && 'rct-tree-item-li-focused', context.isDraggingOver && 'rct-tree-item-li-dragging-over', context.isSearchMatching && 'rct-tree-item-li-search-match') }),\n            react_1.default.createElement(\"div\", __assign({}, context.itemContainerWithoutChildrenProps, { style: { '--depthOffset': \"\".concat((depth + 1) * renderDepthOffset, \"px\") }, className: cx('rct-tree-item-title-container', item.isFolder && 'rct-tree-item-title-container-isFolder', context.isSelected && 'rct-tree-item-title-container-selected', context.isExpanded && 'rct-tree-item-title-container-expanded', context.isFocused && 'rct-tree-item-title-container-focused', context.isDraggingOver &&\n                    'rct-tree-item-title-container-dragging-over', context.isSearchMatching &&\n                    'rct-tree-item-title-container-search-match') }),\n                arrow,\n                react_1.default.createElement(InteractiveComponent, __assign({ type: type }, context.interactiveElementProps, { className: cx('rct-tree-item-button', item.isFolder && 'rct-tree-item-button-isFolder', context.isSelected && 'rct-tree-item-button-selected', context.isExpanded && 'rct-tree-item-button-expanded', context.isFocused && 'rct-tree-item-button-focused', context.isDraggingOver && 'rct-tree-item-button-dragging-over', context.isSearchMatching && 'rct-tree-item-button-search-match') }), title)),\n            children));\n    },\n    renderRenameInput: function (_a) {\n        var inputProps = _a.inputProps, inputRef = _a.inputRef, submitButtonProps = _a.submitButtonProps, submitButtonRef = _a.submitButtonRef, formProps = _a.formProps;\n        return (react_1.default.createElement(\"form\", __assign({}, formProps, { className: \"rct-tree-item-renaming-form\" }),\n            react_1.default.createElement(\"input\", __assign({}, inputProps, { ref: inputRef, className: \"rct-tree-item-renaming-input\" })),\n            react_1.default.createElement(\"input\", __assign({}, submitButtonProps, { ref: submitButtonRef, type: \"submit\", className: \"rct-tree-item-renaming-submit-button\", value: \"\\uD83D\\uDDF8\" }))));\n    },\n    renderTreeContainer: function (_a) {\n        var children = _a.children, containerProps = _a.containerProps, info = _a.info;\n        return (react_1.default.createElement(\"div\", { className: cx('rct-tree-root', info.isFocused && 'rct-tree-root-focus', info.isRenaming && 'rct-tree-root-renaming', info.areItemsSelected && 'rct-tree-root-itemsselected', rtl && 'rct-rtl') },\n            react_1.default.createElement(\"div\", __assign({}, containerProps, { style: __assign({ minHeight: '30px' }, containerProps.style) }), children)));\n    },\n    renderItemsContainer: function (_a) {\n        var children = _a.children, containerProps = _a.containerProps;\n        return (react_1.default.createElement(\"ul\", __assign({}, containerProps, { className: \"rct-tree-items-container\" }), children));\n    },\n    renderDragBetweenLine: function (_a) {\n        var draggingPosition = _a.draggingPosition, lineProps = _a.lineProps;\n        return (react_1.default.createElement(\"div\", __assign({}, lineProps, { style: { left: \"\".concat(draggingPosition.depth * renderDepthOffset, \"px\") }, className: cx('rct-tree-drag-between-line', draggingPosition.targetType === 'between-items' &&\n                draggingPosition.linePosition === 'top' &&\n                'rct-tree-drag-between-line-top', draggingPosition.targetType === 'between-items' &&\n                draggingPosition.linePosition === 'bottom' &&\n                'rct-tree-drag-between-line-bottom') })));\n    },\n    renderSearchInput: function (_a) {\n        var inputProps = _a.inputProps;\n        return (react_1.default.createElement(\"div\", { className: cx('rct-tree-search-input-container') },\n            react_1.default.createElement(\"span\", { className: \"rct-tree-input-icon\" }),\n            react_1.default.createElement(\"input\", __assign({}, inputProps, { className: cx('rct-tree-search-input') }))));\n    },\n    renderLiveDescriptorContainer: function (_a) {\n        var tree = _a.tree, children = _a.children;\n        return (react_1.default.createElement(\"div\", { id: \"rct-livedescription-\".concat(tree.treeId), style: {\n                clip: 'rect(0 0 0 0)',\n                clipPath: 'inset(50%)',\n                height: '1px',\n                overflow: 'hidden',\n                position: 'absolute',\n                whiteSpace: 'nowrap',\n                width: '1px',\n            } }, children));\n    },\n    renderDepthOffset: renderDepthOffset,\n}); };\nexports.createDefaultRenderers = createDefaultRenderers;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./createDefaultRenderers\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useRenderers = void 0;\nvar react_1 = require(\"react\");\nvar createDefaultRenderers_1 = require(\"./createDefaultRenderers\");\nvar useRenderers = function (_a) {\n    var renderItem = _a.renderItem, renderItemTitle = _a.renderItemTitle, renderItemArrow = _a.renderItemArrow, renderRenameInput = _a.renderRenameInput, renderItemsContainer = _a.renderItemsContainer, renderTreeContainer = _a.renderTreeContainer, renderDragBetweenLine = _a.renderDragBetweenLine, renderSearchInput = _a.renderSearchInput, renderLiveDescriptorContainer = _a.renderLiveDescriptorContainer, renderDepthOffset = _a.renderDepthOffset;\n    var defaultRenderers = (0, react_1.useMemo)(function () { return (0, createDefaultRenderers_1.createDefaultRenderers)(renderDepthOffset !== null && renderDepthOffset !== void 0 ? renderDepthOffset : 10); }, [renderDepthOffset]);\n    var customRenderers = {\n        renderItem: renderItem,\n        renderItemTitle: renderItemTitle,\n        renderItemArrow: renderItemArrow,\n        renderRenameInput: renderRenameInput,\n        renderItemsContainer: renderItemsContainer,\n        renderTreeContainer: renderTreeContainer,\n        renderDragBetweenLine: renderDragBetweenLine,\n        renderSearchInput: renderSearchInput,\n        renderLiveDescriptorContainer: renderLiveDescriptorContainer,\n        renderDepthOffset: renderDepthOffset,\n    };\n    var renderers = Object.entries(defaultRenderers).reduce(function (acc, _a) {\n        var key = _a[0], value = _a[1];\n        var keyMapped = key;\n        if (customRenderers[keyMapped]) {\n            acc[keyMapped] = customRenderers[keyMapped];\n        }\n        else {\n            acc[keyMapped] = value;\n        }\n        return acc;\n    }, {});\n    renderers.renderItem.displayName = 'RenderItem';\n    renderers.renderItemTitle.displayName = 'RenderItemTitle';\n    renderers.renderItemArrow.displayName = 'RenderItemArrow';\n    renderers.renderRenameInput.displayName = 'RenderRenameInput';\n    renderers.renderItemsContainer.displayName = 'RenderItemsContainer';\n    renderers.renderTreeContainer.displayName = 'RenderTreeContainer';\n    renderers.renderDragBetweenLine.displayName =\n        'RenderDragBetweenLine';\n    renderers.renderSearchInput.displayName = 'RenderSearchInput';\n    return renderers;\n};\nexports.useRenderers = useRenderers;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SearchInput = void 0;\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useSearchMatchFocus_1 = require(\"./useSearchMatchFocus\");\nvar useViewState_1 = require(\"../tree/useViewState\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar utils_1 = require(\"../utils\");\nvar SearchInput = function (_a) {\n    var _b;\n    var containerRef = _a.containerRef;\n    var _c = (0, Tree_1.useTree)(), search = _c.search, setSearch = _c.setSearch, treeId = _c.treeId, renderers = _c.renderers, renamingItem = _c.renamingItem;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    (0, useViewState_1.useViewState)();\n    var isActiveTree = environment.activeTreeId === treeId;\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\n    (0, useSearchMatchFocus_1.useSearchMatchFocus)();\n    var clearSearch = function () {\n        var _a, _b, _c;\n        setSearch(null);\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\n            // Refocus item in tree\n            // TODO move logic as reusable method into tree or tree environment\n            var focusItem = (_b = (0, utils_1.getDocument)()) === null || _b === void 0 ? void 0 : _b.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\n            (_c = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _c === void 0 ? void 0 : _c.call(focusItem);\n        }\n    };\n    (0, useHotkey_1.useHotkey)('abortSearch', function () {\n        // Without the callSoon, hitting enter to abort\n        // and then moving focus weirdly moves the selected item along\n        // with the focused item.\n        callSoon(function () {\n            clearSearch();\n        });\n    }, isActiveTree && search !== null, true);\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(containerRef, 'keydown', function (e) {\n        var _a, _b;\n        var unicode = e.key.charCodeAt(0);\n        if (((_a = environment.canSearch) !== null && _a !== void 0 ? _a : true) &&\n            ((_b = environment.canSearchByStartingTyping) !== null && _b !== void 0 ? _b : true) &&\n            isActiveTree &&\n            search === null &&\n            !renamingItem &&\n            !e.ctrlKey &&\n            !e.shiftKey &&\n            !e.altKey &&\n            !e.metaKey &&\n            ((unicode >= 48 && unicode <= 57) || // number\n                // (unicode >= 65 && unicode <= 90) || // uppercase letter\n                (unicode >= 97 && unicode <= 122)) // lowercase letter\n        ) {\n            setSearch('');\n        }\n    });\n    if (!((_b = environment.canSearch) !== null && _b !== void 0 ? _b : true) || search === null) {\n        return null;\n    }\n    return renderers.renderSearchInput({\n        inputProps: __assign({ value: search, onChange: function (e) { return setSearch(e.target.value); }, onBlur: function () {\n                clearSearch();\n            }, ref: function (el) {\n                var _a;\n                (_a = el === null || el === void 0 ? void 0 : el.focus) === null || _a === void 0 ? void 0 : _a.call(el);\n            }, 'aria-label': 'Search for items' }, {\n            'data-rct-search-input': 'true',\n        }),\n    });\n};\nexports.SearchInput = SearchInput;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultMatcher = void 0;\nvar defaultMatcher = function (search, item, itemTitle) {\n    return itemTitle.toLowerCase().includes(search.toLowerCase());\n};\nexports.defaultMatcher = defaultMatcher;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useSearchMatchFocus = void 0;\nvar Tree_1 = require(\"../tree/Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar defaultMatcher_1 = require(\"./defaultMatcher\");\nvar useSideEffect_1 = require(\"../useSideEffect\");\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar useSearchMatchFocus = function () {\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), doesSearchMatchItem = _a.doesSearchMatchItem, items = _a.items, getItemTitle = _a.getItemTitle, onFocusItem = _a.onFocusItem;\n    var _b = (0, Tree_1.useTree)(), search = _b.search, treeId = _b.treeId;\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\n    (0, useSideEffect_1.useSideEffect)(function () {\n        if (search && search.length > 0) {\n            callSoon(function () {\n                var focusItem = linearItems.find(function (_a) {\n                    var item = _a.item;\n                    return (doesSearchMatchItem !== null && doesSearchMatchItem !== void 0 ? doesSearchMatchItem : defaultMatcher_1.defaultMatcher)(search, items[item], getItemTitle(items[item]));\n                });\n                if (focusItem) {\n                    onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[focusItem.item], treeId);\n                }\n            });\n        }\n    }, [\n        doesSearchMatchItem,\n        getItemTitle,\n        linearItems,\n        items,\n        onFocusItem,\n        search,\n        treeId,\n        callSoon,\n    ], [search]);\n};\nexports.useSearchMatchFocus = useSearchMatchFocus;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DragBetweenLine = void 0;\nvar React = __importStar(require(\"react\"));\nvar Tree_1 = require(\"./Tree\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar DragBetweenLine = function (_a) {\n    var _b;\n    var treeId = _a.treeId;\n    var _c = (0, DragAndDropProvider_1.useDragAndDrop)(), draggingPosition = _c.draggingPosition, itemHeight = _c.itemHeight;\n    var renderers = (0, Tree_1.useTree)().renderers;\n    var shouldDisplay = draggingPosition &&\n        draggingPosition.targetType === 'between-items' &&\n        draggingPosition.treeId === treeId;\n    if (!shouldDisplay) {\n        return null;\n    }\n    var lineProps = {\n        onDragOver: function (e) { return e.preventDefault(); }, // Allow dropping\n    };\n    return (React.createElement(\"div\", { style: {\n            position: 'absolute',\n            left: '0',\n            right: '0',\n            top: \"\".concat(((_b = draggingPosition === null || draggingPosition === void 0 ? void 0 : draggingPosition.linearIndex) !== null && _b !== void 0 ? _b : 0) * itemHeight, \"px\"),\n        } }, renderers.renderDragBetweenLine({\n        draggingPosition: draggingPosition,\n        lineProps: lineProps,\n    })));\n};\nexports.DragBetweenLine = DragBetweenLine;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LiveDescription = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar defaultLiveDescriptors_1 = require(\"./defaultLiveDescriptors\");\nvar Tree_1 = require(\"./Tree\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar resolveLiveDescriptor_1 = require(\"./resolveLiveDescriptor\");\nvar useKeyboardBindings_1 = require(\"../hotkeys/useKeyboardBindings\");\nvar LiveWrapper = function (_a) {\n    var children = _a.children, live = _a.live;\n    return React.createElement(\"div\", { \"aria-live\": live, dangerouslySetInnerHTML: { __html: children } });\n};\nvar LiveDescription = function () {\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var tree = (0, Tree_1.useTree)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    var keys = (0, useKeyboardBindings_1.useKeyboardBindings)();\n    var descriptors = (0, react_1.useMemo)(function () { var _a; return (_a = env.liveDescriptors) !== null && _a !== void 0 ? _a : defaultLiveDescriptors_1.defaultLiveDescriptors; }, [env.liveDescriptors]);\n    var MainWrapper = tree.renderers.renderLiveDescriptorContainer;\n    if (tree.treeInformation.isRenaming) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.renamingItem, env, dnd, tree, keys))));\n    }\n    if (tree.treeInformation.isSearching) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.searching, env, dnd, tree, keys))));\n    }\n    if (tree.treeInformation.isProgrammaticallyDragging) {\n        return (React.createElement(MainWrapper, { tree: tree },\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.programmaticallyDragging, env, dnd, tree, keys)),\n            React.createElement(LiveWrapper, { live: \"assertive\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.programmaticallyDraggingTarget, env, dnd, tree, keys))));\n    }\n    return (React.createElement(MainWrapper, { tree: tree },\n        React.createElement(LiveWrapper, { live: \"off\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.introduction, env, dnd, tree, keys))));\n};\nexports.LiveDescription = LiveDescription;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MaybeLiveDescription = void 0;\nvar React = __importStar(require(\"react\"));\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar LiveDescription_1 = require(\"./LiveDescription\");\nvar MaybeLiveDescription = function () {\n    var _a;\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    if (!((_a = env.showLiveDescription) !== null && _a !== void 0 ? _a : true)) {\n        return null;\n    }\n    return React.createElement(LiveDescription_1.LiveDescription, null);\n};\nexports.MaybeLiveDescription = MaybeLiveDescription;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tree = exports.useTree = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar TreeManager_1 = require(\"./TreeManager\");\nvar useCreatedTreeInformation_1 = require(\"./useCreatedTreeInformation\");\nvar getItemsLinearly_1 = require(\"./getItemsLinearly\");\nvar TreeActionsProvider_1 = require(\"../treeActions/TreeActionsProvider\");\nvar TreeContext = React.createContext(null); // TODO default value\nvar useTree = function () { return (0, react_1.useContext)(TreeContext); };\nexports.useTree = useTree;\nexports.Tree = React.forwardRef(function (props, ref) {\n    var _a;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var renderers = (0, react_1.useMemo)(function () { return (__assign(__assign({}, environment), props)); }, [props, environment]);\n    var _b = (0, react_1.useState)(null), search = _b[0], setSearch = _b[1];\n    var _c = (0, react_1.useState)(null), renamingItem = _c[0], setRenamingItem = _c[1];\n    var rootItem = environment.items[props.rootItem];\n    var viewState = environment.viewState[props.treeId];\n    (0, react_1.useEffect)(function () {\n        environment.registerTree({\n            treeId: props.treeId,\n            rootItem: props.rootItem,\n        });\n        return function () { return environment.unregisterTree(props.treeId); };\n        // TODO should be able to remove soon, and add environment.registerTree, environment.unregisterTree as deps\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.treeId, props.rootItem]);\n    var treeInformation = (0, useCreatedTreeInformation_1.useCreatedTreeInformation)(props, renamingItem, search);\n    var treeContextProps = (0, react_1.useMemo)(function () { return ({\n        treeId: props.treeId,\n        rootItem: props.rootItem,\n        treeLabel: props.treeLabel,\n        treeLabelledBy: props.treeLabelledBy,\n        getItemsLinearly: function () {\n            return (0, getItemsLinearly_1.getItemsLinearly)(props.rootItem, viewState !== null && viewState !== void 0 ? viewState : {}, environment.items);\n        },\n        treeInformation: treeInformation,\n        search: search,\n        setSearch: setSearch,\n        renamingItem: renamingItem,\n        setRenamingItem: setRenamingItem,\n        renderers: renderers,\n    }); }, [\n        environment.items,\n        props.rootItem,\n        props.treeId,\n        props.treeLabel,\n        props.treeLabelledBy,\n        renamingItem,\n        renderers,\n        search,\n        treeInformation,\n        viewState,\n    ]);\n    if (rootItem === undefined) {\n        (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.rootItem]);\n        return null;\n    }\n    return (React.createElement(TreeContext.Provider, { value: treeContextProps },\n        React.createElement(TreeActionsProvider_1.TreeActionsProvider, { ref: ref },\n            React.createElement(TreeManager_1.TreeManager, null))));\n});\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeManager = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar TreeItemChildren_1 = require(\"../treeItem/TreeItemChildren\");\nvar DragBetweenLine_1 = require(\"./DragBetweenLine\");\nvar useFocusWithin_1 = require(\"./useFocusWithin\");\nvar useTreeKeyboardBindings_1 = require(\"./useTreeKeyboardBindings\");\nvar SearchInput_1 = require(\"../search/SearchInput\");\nvar Tree_1 = require(\"./Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar MaybeLiveDescription_1 = require(\"./MaybeLiveDescription\");\nvar TreeManager = function () {\n    var _a = (0, Tree_1.useTree)(), treeId = _a.treeId, rootItem = _a.rootItem, renderers = _a.renderers, treeInformation = _a.treeInformation;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var containerRef = (0, react_1.useRef)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    (0, useTreeKeyboardBindings_1.useTreeKeyboardBindings)();\n    (0, useFocusWithin_1.useFocusWithin)(containerRef.current, function () {\n        environment.setActiveTree(treeId);\n    }, function () {\n        environment.setActiveTree(function (oldTreeId) {\n            return oldTreeId === treeId ? undefined : oldTreeId;\n        });\n    });\n    var rootChildren = environment.items[rootItem].children;\n    var treeChildren = (React.createElement(React.Fragment, null,\n        React.createElement(MaybeLiveDescription_1.MaybeLiveDescription, null),\n        React.createElement(TreeItemChildren_1.TreeItemChildren, { depth: 0, parentId: rootItem }, rootChildren !== null && rootChildren !== void 0 ? rootChildren : []),\n        React.createElement(DragBetweenLine_1.DragBetweenLine, { treeId: treeId }),\n        React.createElement(SearchInput_1.SearchInput, { containerRef: containerRef.current })));\n    var containerProps = __assign({ onDragOver: function (e) {\n            e.preventDefault(); // Allow drop. Also implicitly set by items, but needed here as well for dropping on empty space\n            dnd.onDragOverTreeHandler(e, treeId, containerRef);\n        }, onDragLeave: function (e) {\n            dnd.onDragLeaveContainerHandler(e, containerRef);\n        }, onMouseDown: function () { return dnd.abortProgrammaticDrag(); }, ref: containerRef, style: { position: 'relative' }, role: 'tree', 'aria-label': !treeInformation.treeLabelledBy\n            ? treeInformation.treeLabel\n            : undefined, 'aria-labelledby': treeInformation.treeLabelledBy }, {\n        'data-rct-tree': treeId,\n    });\n    return renderers.renderTreeContainer({\n        children: treeChildren,\n        info: treeInformation,\n        containerProps: containerProps,\n    });\n};\nexports.TreeManager = TreeManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultLiveDescriptors = void 0;\nexports.defaultLiveDescriptors = {\n    introduction: \"\\n    <p>Accessibility guide for tree {treeLabel}.</p>\\n    <p>\\n      Navigate the tree with the arrow keys. Common tree hotkeys apply. Further keybindings are available:\\n    </p>\\n    <ul>\\n      <li>{keybinding:primaryAction} to execute primary action on focused item</li>\\n      <li>{keybinding:renameItem} to start renaming the focused item</li>\\n      <li>{keybinding:abortRenameItem} to abort renaming an item</li>\\n      <li>{keybinding:startProgrammaticDnd} to start dragging selected items</li>\\n    </ul>\\n  \",\n    renamingItem: \"\\n    <p>Renaming the item {renamingItem}.</p>\\n    <p>Use the keybinding {keybinding:abortRenameItem} to abort renaming.</p>\\n  \",\n    searching: \"\\n    <p>Searching</p>\\n  \",\n    programmaticallyDragging: \"\\n    <p>Dragging items {dragItems}.</p>\\n    <p>Press the arrow keys to move the drag target.</p>\\n    <p>Press {keybinding:completeProgrammaticDnd} to drop or {keybinding:abortProgrammaticDnd} to abort.</p>\\n  \",\n    programmaticallyDraggingTarget: \"\\n    <p>Drop target is {dropTarget}.</p>\\n  \",\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getItemsLinearly = void 0;\nvar getItemsLinearly = function (rootItem, viewState, items, depth) {\n    var _a, _b, _c;\n    if (depth === void 0) { depth = 0; }\n    var itemIds = [];\n    for (var _i = 0, _d = (_b = (_a = items[rootItem]) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : []; _i < _d.length; _i++) {\n        var itemId = _d[_i];\n        var item = items[itemId];\n        itemIds.push({ item: itemId, depth: depth });\n        if (item &&\n            item.isFolder &&\n            !!item.children &&\n            ((_c = viewState.expandedItems) === null || _c === void 0 ? void 0 : _c.includes(itemId))) {\n            itemIds.push.apply(itemIds, (0, exports.getItemsLinearly)(itemId, viewState, items, depth + 1));\n        }\n    }\n    return itemIds;\n};\nexports.getItemsLinearly = getItemsLinearly;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveLiveDescriptor = void 0;\nvar resolveLiveDescriptor = function (descriptor, environment, dnd, tree, keyboardBindings) {\n    var getItemTitle = function (index) {\n        return environment.getItemTitle(environment.items[index]);\n    };\n    return descriptor.replace(/({[^\\s}]+)}/g, function (variableNameWithBrackets) {\n        var _a, _b, _c;\n        var variableName = variableNameWithBrackets.slice(1, -1);\n        switch (variableName) {\n            case 'treeLabel':\n                return (_a = tree.treeLabel) !== null && _a !== void 0 ? _a : '';\n            case 'renamingItem':\n                return tree.renamingItem ? getItemTitle(tree.renamingItem) : 'None';\n            case 'dragItems':\n                return ((_c = (_b = dnd.draggingItems) === null || _b === void 0 ? void 0 : _b.map(function (item) { return environment.getItemTitle(item); }).join(', ')) !== null && _c !== void 0 ? _c : 'None');\n            case 'dropTarget': {\n                if (!dnd.draggingPosition) {\n                    return 'None';\n                }\n                if (dnd.draggingPosition.targetType === 'item' ||\n                    dnd.draggingPosition.targetType === 'root') {\n                    return \"within \".concat(getItemTitle(dnd.draggingPosition.targetItem));\n                }\n                var parentItem = environment.items[dnd.draggingPosition.parentItem];\n                var parentTitle = environment.getItemTitle(parentItem);\n                if (dnd.draggingPosition.childIndex === 0) {\n                    return \"within \".concat(parentTitle, \" at the start\");\n                }\n                return \"within \".concat(parentTitle, \" after \").concat(getItemTitle(parentItem.children[dnd.draggingPosition.childIndex - 1]));\n            }\n            default:\n                if (variableName.startsWith('keybinding:')) {\n                    return keyboardBindings[variableName.slice(11)][0];\n                }\n                throw Error(\"Unknown live descriptor variable {\".concat(variableName, \"}\"));\n        }\n    });\n};\nexports.resolveLiveDescriptor = resolveLiveDescriptor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scrollIntoView = void 0;\nvar utils_1 = require(\"../utils\");\nvar scrollIntoView = function (element) {\n    var _a, _b, _c, _d;\n    if (!element) {\n        return;\n    }\n    if (element.scrollIntoViewIfNeeded) {\n        element.scrollIntoViewIfNeeded();\n    }\n    else {\n        var boundingBox = element.getBoundingClientRect();\n        var isElementInViewport = boundingBox.top >= 0 &&\n            boundingBox.left >= 0 &&\n            boundingBox.bottom <=\n                (window.innerHeight ||\n                    !!((_b = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.documentElement) === null || _b === void 0 ? void 0 : _b.clientHeight)) &&\n            boundingBox.right <=\n                (window.innerWidth || !!((_d = (_c = (0, utils_1.getDocument)()) === null || _c === void 0 ? void 0 : _c.documentElement) === null || _d === void 0 ? void 0 : _d.clientWidth));\n        if (!isElementInViewport) {\n            element.scrollIntoView();\n        }\n    }\n};\nexports.scrollIntoView = scrollIntoView;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCreatedTreeInformation = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar useCreatedTreeInformation = function (tree, renamingItem, search) {\n    var _a;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    var selectedItems = (_a = environment.viewState[tree.treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems;\n    return (0, react_1.useMemo)(function () {\n        var _a, _b;\n        return ({\n            isFocused: environment.activeTreeId === tree.treeId,\n            isRenaming: !!renamingItem,\n            areItemsSelected: ((_a = selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length) !== null && _a !== void 0 ? _a : 0) > 0,\n            isSearching: search !== null,\n            search: search,\n            isProgrammaticallyDragging: (_b = dnd.isProgrammaticallyDragging) !== null && _b !== void 0 ? _b : false,\n            treeId: tree.treeId,\n            rootItem: tree.rootItem,\n            treeLabel: tree.treeLabel,\n            treeLabelledBy: tree.treeLabelledBy,\n        });\n    }, [\n        environment.activeTreeId,\n        tree.treeId,\n        tree.rootItem,\n        tree.treeLabel,\n        tree.treeLabelledBy,\n        renamingItem,\n        selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length,\n        search,\n        dnd.isProgrammaticallyDragging,\n    ]);\n};\nexports.useCreatedTreeInformation = useCreatedTreeInformation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useFocusWithin = void 0;\nvar react_1 = require(\"react\");\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar useFocusWithin = function (element, onFocusIn, onFocusOut) {\n    var _a = (0, react_1.useState)(false), focusWithin = _a[0], setFocusWithin = _a[1];\n    var isLoosingFocusFlag = (0, react_1.useRef)(false);\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(element, 'focusin', function () {\n        if (!focusWithin) {\n            setFocusWithin(true);\n            onFocusIn === null || onFocusIn === void 0 ? void 0 : onFocusIn();\n        }\n        if (isLoosingFocusFlag.current) {\n            isLoosingFocusFlag.current = false;\n        }\n    });\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(element, 'focusout', function () {\n        isLoosingFocusFlag.current = true;\n        callSoon(function () {\n            if (isLoosingFocusFlag.current &&\n                !(element === null || element === void 0 ? void 0 : element.contains(document.activeElement))) {\n                onFocusOut === null || onFocusOut === void 0 ? void 0 : onFocusOut();\n                isLoosingFocusFlag.current = false;\n                setFocusWithin(false);\n            }\n        });\n    });\n    return focusWithin;\n};\nexports.useFocusWithin = useFocusWithin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useMoveFocusToIndex = void 0;\nvar useViewState_1 = require(\"./useViewState\");\nvar Tree_1 = require(\"./Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\nvar useStableHandler_1 = require(\"../useStableHandler\");\nvar useMoveFocusToIndex = function () {\n    var treeId = (0, Tree_1.useTree)().treeId;\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), onFocusItem = _a.onFocusItem, items = _a.items;\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\n    var viewState = (0, useViewState_1.useViewState)();\n    return (0, useStableHandler_1.useStableHandler)(function (computeNewIndex) {\n        var _a;\n        var currentIndex = (_a = linearItems.findIndex(function (item) { return item.item === viewState.focusedItem; })) !== null && _a !== void 0 ? _a : 0;\n        var newIndex = computeNewIndex(currentIndex, linearItems);\n        var newIndexBounded = Math.max(0, Math.min(linearItems.length - 1, newIndex));\n        var newFocusItem = items[linearItems[newIndexBounded].item];\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newFocusItem, treeId);\n        return newFocusItem;\n    });\n};\nexports.useMoveFocusToIndex = useMoveFocusToIndex;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useSelectUpTo = void 0;\nvar react_1 = require(\"react\");\nvar useViewState_1 = require(\"./useViewState\");\nvar Tree_1 = require(\"./Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\nvar usePrevious = function (value) {\n    var ref = (0, react_1.useRef)({\n        target: value,\n        previous: undefined,\n    });\n    if (ref.current.target !== value) {\n        ref.current.previous = ref.current.target;\n        ref.current.target = value;\n    }\n    return ref.current.previous;\n};\nvar useSelectUpTo = function (startingAt) {\n    var viewState = (0, useViewState_1.useViewState)();\n    var treeId = (0, Tree_1.useTree)().treeId;\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\n    var onSelectItems = (0, ControlledTreeEnvironment_1.useTreeEnvironment)().onSelectItems;\n    var focusedItemPrevious = usePrevious(viewState.focusedItem);\n    return (0, react_1.useCallback)(function (item, overrideOldSelection) {\n        var _a, _b;\n        if (overrideOldSelection === void 0) { overrideOldSelection = false; }\n        var itemIndex = item.index;\n        var selectMergedItems = function (oldSelection, newSelection) {\n            var merged = __spreadArray(__spreadArray([], (overrideOldSelection ? [] : oldSelection), true), newSelection.filter(function (i) { return overrideOldSelection || !oldSelection.includes(i); }), true);\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(merged, treeId);\n        };\n        if (viewState &&\n            viewState.selectedItems &&\n            viewState.selectedItems.length > 0) {\n            // Depending on whether focusItem() or selectUpTo() was called first, which item was the last focused item depends\n            var lastFocus_1 = viewState.focusedItem === itemIndex\n                ? focusedItemPrevious\n                : viewState.focusedItem;\n            var selectionStart = startingAt === 'last-focus'\n                ? linearItems.findIndex(function (linearItem) { return lastFocus_1 === linearItem.item; })\n                : linearItems.findIndex(function (linearItem) { var _a; return (_a = viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.includes(linearItem.item); });\n            var selectionEnd = linearItems.findIndex(function (linearItem) { return linearItem.item === itemIndex; });\n            if (selectionStart < selectionEnd) {\n                var selection = linearItems\n                    .slice(selectionStart, selectionEnd + 1)\n                    .map(function (_a) {\n                    var item = _a.item;\n                    return item;\n                });\n                selectMergedItems((_a = viewState.selectedItems) !== null && _a !== void 0 ? _a : [], selection);\n            }\n            else {\n                var selection = linearItems\n                    .slice(selectionEnd, selectionStart + 1)\n                    .map(function (_a) {\n                    var item = _a.item;\n                    return item;\n                });\n                selectMergedItems((_b = viewState.selectedItems) !== null && _b !== void 0 ? _b : [], selection);\n            }\n        }\n        else {\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems([itemIndex], treeId);\n        }\n    }, [\n        viewState,\n        onSelectItems,\n        treeId,\n        startingAt,\n        linearItems,\n        focusedItemPrevious,\n    ]);\n};\nexports.useSelectUpTo = useSelectUpTo;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useTreeKeyboardBindings = void 0;\nvar useKey_1 = require(\"../hotkeys/useKey\");\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\nvar useMoveFocusToIndex_1 = require(\"./useMoveFocusToIndex\");\nvar useViewState_1 = require(\"./useViewState\");\nvar Tree_1 = require(\"./Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar useSelectUpTo_1 = require(\"./useSelectUpTo\");\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\nvar useTreeKeyboardBindings = function () {\n    var _a;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var _b = (0, Tree_1.useTree)(), treeId = _b.treeId, setRenamingItem = _b.setRenamingItem, setSearch = _b.setSearch, renamingItem = _b.renamingItem;\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    var viewState = (0, useViewState_1.useViewState)();\n    var moveFocusToIndex = (0, useMoveFocusToIndex_1.useMoveFocusToIndex)();\n    var selectUpTo = (0, useSelectUpTo_1.useSelectUpTo)('first-selected');\n    var isActiveTree = environment.activeTreeId === treeId;\n    var isRenaming = !!renamingItem;\n    var disableArrowKeys = environment.disableArrowKeys;\n    var enableArrowKeys = !disableArrowKeys && isActiveTree && !isRenaming;\n    (0, useKey_1.useKey)('arrowdown', function (e) {\n        e.preventDefault();\n        if (dnd.isProgrammaticallyDragging) {\n            dnd.programmaticDragDown();\n        }\n        else {\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex + 1; });\n            if (e.shiftKey) {\n                selectUpTo(newFocusItem);\n            }\n        }\n    }, enableArrowKeys);\n    (0, useKey_1.useKey)('arrowup', function (e) {\n        e.preventDefault();\n        if (dnd.isProgrammaticallyDragging) {\n            dnd.programmaticDragUp();\n        }\n        else {\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex - 1; });\n            if (e.shiftKey) {\n                selectUpTo(newFocusItem);\n            }\n        }\n    }, enableArrowKeys);\n    (0, useHotkey_1.useHotkey)('moveFocusToFirstItem', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function () { return 0; });\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('moveFocusToLastItem', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) { return linearItems.length - 1; });\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useKey_1.useKey)('arrowright', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) {\n            var _a, _b;\n            var item = environment.items[linearItems[currentIndex].item];\n            if (item.isFolder) {\n                if ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index)) {\n                    return currentIndex + 1;\n                }\n                (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n            }\n            return currentIndex;\n        });\n    }, enableArrowKeys && !dnd.isProgrammaticallyDragging);\n    (0, useKey_1.useKey)('arrowleft', function (e) {\n        e.preventDefault();\n        moveFocusToIndex(function (currentIndex, linearItems) {\n            var _a, _b;\n            var item = environment.items[linearItems[currentIndex].item];\n            var itemDepth = linearItems[currentIndex].depth;\n            if (item.isFolder && ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index))) {\n                (_b = environment.onCollapseItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n            }\n            else if (itemDepth > 0) {\n                var parentIndex = currentIndex;\n                for (parentIndex; linearItems[parentIndex].depth !== itemDepth - 1; parentIndex -= 1)\n                    ;\n                return parentIndex;\n            }\n            return currentIndex;\n        });\n    }, enableArrowKeys && !dnd.isProgrammaticallyDragging);\n    (0, useHotkey_1.useHotkey)('primaryAction', function (e) {\n        var _a, _b;\n        e.preventDefault();\n        if (viewState.focusedItem !== undefined) {\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [viewState.focusedItem], treeId);\n            (_b = environment.onPrimaryAction) === null || _b === void 0 ? void 0 : _b.call(environment, environment.items[viewState.focusedItem], treeId);\n        }\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('toggleSelectItem', function (e) {\n        var _a, _b, _c;\n        e.preventDefault();\n        e.stopPropagation();\n        if (viewState.focusedItem !== undefined) {\n            if (viewState.selectedItems &&\n                viewState.selectedItems.includes(viewState.focusedItem)) {\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, viewState.selectedItems.filter(function (item) { return item !== viewState.focusedItem; }), treeId);\n            }\n            else {\n                (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, __spreadArray(__spreadArray([], ((_c = viewState.selectedItems) !== null && _c !== void 0 ? _c : []), true), [viewState.focusedItem], false), treeId);\n            }\n        }\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('selectAll', function (e) {\n        var _a;\n        e.preventDefault();\n        (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, linearItems.map(function (_a) {\n            var item = _a.item;\n            return item;\n        }), treeId);\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('renameItem', function (e) {\n        var _a;\n        if (viewState.focusedItem === undefined) {\n            return;\n        }\n        e.preventDefault();\n        var item = environment.items[viewState.focusedItem];\n        if (item.canRename === false) {\n            return;\n        }\n        (_a = environment.onStartRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n        setRenamingItem(item.index);\n    }, isActiveTree && ((_a = environment.canRename) !== null && _a !== void 0 ? _a : true) && !isRenaming);\n    (0, useHotkey_1.useHotkey)('startSearch', function (e) {\n        var _a, _b;\n        e.preventDefault();\n        setSearch('');\n        (_b = (_a = document.querySelector('[data-rct-search-input=\"true\"]')) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('startProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.startProgrammaticDrag();\n    }, isActiveTree && !isRenaming);\n    (0, useHotkey_1.useHotkey)('completeProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.completeProgrammaticDrag();\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\n    (0, useHotkey_1.useHotkey)('abortProgrammaticDnd', function (e) {\n        e.preventDefault();\n        dnd.abortProgrammaticDrag();\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\n};\nexports.useTreeKeyboardBindings = useTreeKeyboardBindings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useViewState = void 0;\nvar Tree_1 = require(\"./Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useViewState = function () {\n    var _a;\n    var treeId = (0, Tree_1.useTree)().treeId;\n    var viewState = (0, ControlledTreeEnvironment_1.useTreeEnvironment)().viewState;\n    return (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {};\n};\nexports.useViewState = useViewState;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeActionsProvider = exports.useTreeActions = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useCreatedTreeRef_1 = require(\"./useCreatedTreeRef\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar EnvironmentActionsProvider_1 = require(\"../environmentActions/EnvironmentActionsProvider\");\nvar EnvironmentActionsContext = React.createContext(null);\nvar useTreeActions = function () { return React.useContext(EnvironmentActionsContext); };\nexports.useTreeActions = useTreeActions;\nexports.TreeActionsProvider = React.forwardRef(function (props, ref) {\n    (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var tree = (0, Tree_1.useTree)();\n    (0, DragAndDropProvider_1.useDragAndDrop)();\n    var envActions = (0, EnvironmentActionsProvider_1.useEnvironmentActions)();\n    // TODO change tree childs to use actions rather than output events where possible\n    // TODO maybe replace with stable handlers\n    var actions = (0, react_1.useMemo)(function () { return ({\n        abortRenamingItem: function () {\n            tree.setRenamingItem(null);\n        },\n        abortSearch: function () {\n            tree.setSearch(null);\n        },\n        collapseItem: function (itemId) {\n            envActions.collapseItem(itemId, tree.treeId);\n        },\n        completeRenamingItem: function () {\n            // TODO\n        },\n        expandItem: function (itemId) {\n            envActions.expandItem(itemId, tree.treeId);\n        },\n        focusItem: function (itemId, setDomFocus) {\n            if (setDomFocus === void 0) { setDomFocus = true; }\n            envActions.focusItem(itemId, tree.treeId, setDomFocus);\n        },\n        focusTree: function (autoFocus) {\n            if (autoFocus === void 0) { autoFocus = true; }\n            envActions.focusTree(tree.treeId, autoFocus);\n        },\n        invokePrimaryAction: function (itemId) {\n            envActions.invokePrimaryAction(itemId, tree.treeId);\n        },\n        moveFocusDown: function () {\n            envActions.moveFocusDown(tree.treeId);\n        },\n        moveFocusUp: function () {\n            envActions.moveFocusUp(tree.treeId);\n        },\n        renameItem: function (itemId, name) {\n            envActions.renameItem(itemId, name, tree.treeId);\n        },\n        selectItems: function (itemsIds) {\n            envActions.selectItems(itemsIds, tree.treeId);\n        },\n        setSearch: function (search) {\n            tree.setSearch(search);\n        },\n        startRenamingItem: function (itemId) {\n            tree.setRenamingItem(itemId);\n        },\n        stopRenamingItem: function () {\n            tree.setRenamingItem(null);\n        },\n        toggleItemExpandedState: function (itemId) {\n            envActions.toggleItemExpandedState(itemId, tree.treeId);\n        },\n        toggleItemSelectStatus: function (itemId) {\n            envActions.toggleItemSelectStatus(itemId, tree.treeId);\n        },\n        expandAll: function () {\n            envActions.expandAll(tree.treeId);\n        },\n        collapseAll: function () {\n            envActions.collapseAll(tree.treeId);\n        },\n        expandSubsequently: function (itemIds) {\n            return envActions.expandSubsequently(tree.treeId, itemIds);\n        },\n    }); }, [envActions, tree]);\n    (0, useCreatedTreeRef_1.useCreatedTreeRef)(ref, actions);\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\n});\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCreatedTreeRef = void 0;\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar useCreatedTreeRef = function (ref, actions) {\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var tree = (0, Tree_1.useTree)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    (0, react_1.useImperativeHandle)(ref, function () { return (__assign(__assign(__assign({}, actions), { treeEnvironmentContext: environment, dragAndDropContext: dnd, treeContext: tree }), tree.treeInformation)); });\n};\nexports.useCreatedTreeRef = useCreatedTreeRef;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeItemChildren = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar TreeItemElement_1 = require(\"./TreeItemElement\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar TreeItemChildren = function (props) {\n    var _a = (0, Tree_1.useTree)(), renderers = _a.renderers, treeInformation = _a.treeInformation;\n    var childElements = [];\n    for (var _i = 0, _b = props.children; _i < _b.length; _i++) {\n        var child = _b[_i];\n        childElements.push(react_1.default.createElement(TreeItemElement_1.TreeItemElement, { key: child, itemIndex: child, depth: props.depth }));\n    }\n    if (childElements.length === 0) {\n        return null;\n    }\n    var containerProps = {\n        role: props.depth !== 0 ? 'group' : undefined,\n    };\n    return renderers.renderItemsContainer({\n        children: childElements,\n        info: treeInformation,\n        containerProps: containerProps,\n        depth: props.depth,\n        parentId: props.parentId,\n    });\n};\nexports.TreeItemChildren = TreeItemChildren;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeItemElement = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar TreeItemChildren_1 = require(\"./TreeItemChildren\");\nvar useViewState_1 = require(\"../tree/useViewState\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useTreeItemRenderContext_1 = require(\"./useTreeItemRenderContext\");\nvar TreeItemRenamingInput_1 = require(\"./TreeItemRenamingInput\");\nvar TreeItemElement = function (props) {\n    var _a, _b, _c, _d;\n    var _e = (0, react_1.useState)(false), hasBeenRequested = _e[0], setHasBeenRequested = _e[1];\n    var _f = (0, Tree_1.useTree)(), renderers = _f.renderers, treeInformation = _f.treeInformation, renamingItem = _f.renamingItem;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var viewState = (0, useViewState_1.useViewState)();\n    var item = environment.items[props.itemIndex];\n    var isExpanded = (0, react_1.useMemo)(function () { var _a; return (_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(props.itemIndex); }, [props.itemIndex, viewState.expandedItems]);\n    var renderContext = (0, useTreeItemRenderContext_1.useTreeItemRenderContext)(item);\n    if (item === undefined || renderContext === undefined) {\n        if (!hasBeenRequested) {\n            setHasBeenRequested(true);\n            (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.itemIndex]);\n        }\n        return null;\n    }\n    var shouldRenderChildren = (_c = (_b = environment.shouldRenderChildren) === null || _b === void 0 ? void 0 : _b.call(environment, item, renderContext)) !== null && _c !== void 0 ? _c : (item.isFolder && isExpanded);\n    var children = item.children && shouldRenderChildren && (react_1.default.createElement(TreeItemChildren_1.TreeItemChildren, { depth: props.depth + 1, parentId: props.itemIndex }, item.children));\n    var title = environment.getItemTitle(item);\n    var titleComponent = renamingItem === props.itemIndex ? (react_1.default.createElement(TreeItemRenamingInput_1.TreeItemRenamingInput, { itemIndex: props.itemIndex })) : (renderers.renderItemTitle({\n        info: treeInformation,\n        context: renderContext,\n        title: title,\n        item: item,\n    }));\n    var arrowComponent = renderers.renderItemArrow({\n        info: treeInformation,\n        context: renderContext,\n        item: environment.items[props.itemIndex],\n    });\n    return ((_d = renderers.renderItem({\n        item: environment.items[props.itemIndex],\n        depth: props.depth,\n        title: titleComponent,\n        arrow: arrowComponent,\n        context: renderContext,\n        info: treeInformation,\n        children: children,\n    })) !== null && _d !== void 0 ? _d : null); // Type to use AllTreeRenderProps\n};\nexports.TreeItemElement = TreeItemElement;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeItemRenamingInput = void 0;\nvar react_1 = require(\"react\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\nvar useSideEffect_1 = require(\"../useSideEffect\");\nvar useCallSoon_1 = require(\"../useCallSoon\");\nvar TreeItemRenamingInput = function (props) {\n    var _a = (0, Tree_1.useTree)(), renderers = _a.renderers, treeInformation = _a.treeInformation, setRenamingItem = _a.setRenamingItem, treeId = _a.treeId;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var inputRef = (0, react_1.useRef)(null);\n    var submitButtonRef = (0, react_1.useRef)(null);\n    var item = environment.items[props.itemIndex];\n    var _b = (0, react_1.useState)(environment.getItemTitle(item)), title = _b[0], setTitle = _b[1];\n    var callSoon = (0, useCallSoon_1.useCallSoon)(true);\n    var abort = function () {\n        var _a;\n        (_a = environment.onAbortRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeInformation.treeId);\n        setRenamingItem(null);\n        callSoon(function () {\n            environment.setActiveTree(treeId);\n        });\n    };\n    var confirm = function () {\n        var _a;\n        (_a = environment.onRenameItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, title, treeInformation.treeId);\n        setRenamingItem(null);\n        callSoon(function () {\n            environment.setActiveTree(treeId);\n        });\n    };\n    (0, useSideEffect_1.useSideEffect)(function () {\n        var _a, _b, _c, _d;\n        environment.setActiveTree(treeId);\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\n            (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.select();\n            (_d = (_c = inputRef.current) === null || _c === void 0 ? void 0 : _c.focus) === null || _d === void 0 ? void 0 : _d.call(_c);\n        }\n    }, [environment, treeId], []);\n    (0, useHotkey_1.useHotkey)('abortRenameItem', function () {\n        abort();\n    }, true, true);\n    var inputProps = {\n        value: title,\n        onChange: function (e) {\n            setTitle(e.target.value);\n        },\n        onBlur: function (e) {\n            if (!e.relatedTarget || e.relatedTarget !== submitButtonRef.current) {\n                abort();\n            }\n        },\n        'aria-label': 'New item name',\n        tabIndex: 0,\n    };\n    var submitButtonProps = {\n        onClick: function (e) {\n            e.stopPropagation();\n            confirm();\n        },\n    };\n    var formProps = {\n        onSubmit: function (e) {\n            e.preventDefault();\n            confirm();\n        },\n    };\n    return renderers.renderRenameInput({\n        item: item,\n        inputRef: inputRef,\n        submitButtonProps: submitButtonProps,\n        submitButtonRef: submitButtonRef,\n        formProps: formProps,\n        inputProps: inputProps,\n    });\n};\nexports.TreeItemRenamingInput = TreeItemRenamingInput;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useTreeItemRenderContext = void 0;\nvar react_1 = require(\"react\");\nvar defaultMatcher_1 = require(\"../search/defaultMatcher\");\nvar Tree_1 = require(\"../tree/Tree\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar InteractionManagerProvider_1 = require(\"../controlledEnvironment/InteractionManagerProvider\");\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\nvar useSelectUpTo_1 = require(\"../tree/useSelectUpTo\");\nvar useGetOriginalItemOrder_1 = require(\"../useGetOriginalItemOrder\");\n// TODO restructure file. Everything into one hook file without helper methods, let all props be generated outside (InteractionManager and AccessibilityPropsManager), ...\nvar useTreeItemRenderContext = function (item) {\n    var _a, _b, _c, _d;\n    var _e = (0, Tree_1.useTree)(), treeId = _e.treeId, search = _e.search, renamingItem = _e.renamingItem, setRenamingItem = _e.setRenamingItem;\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    var interactionManager = (0, InteractionManagerProvider_1.useInteractionManager)();\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\n    var selectUpTo = (0, useSelectUpTo_1.useSelectUpTo)('last-focus');\n    var itemTitle = item && environment.getItemTitle(item);\n    var getOriginalItemOrder = (0, useGetOriginalItemOrder_1.useGetOriginalItemOrder)();\n    var isSearchMatching = (0, react_1.useMemo)(function () {\n        var _a;\n        return search === null || search.length === 0 || !item || !itemTitle\n            ? false\n            : ((_a = environment.doesSearchMatchItem) !== null && _a !== void 0 ? _a : defaultMatcher_1.defaultMatcher)(search, item, itemTitle);\n    }, [search, item, itemTitle, environment.doesSearchMatchItem]);\n    var isSelected = item && ((_b = (_a = environment.viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(item.index));\n    var isExpanded = item && ((_d = (_c = environment.viewState[treeId]) === null || _c === void 0 ? void 0 : _c.expandedItems) === null || _d === void 0 ? void 0 : _d.includes(item.index));\n    var isRenaming = item && renamingItem === item.index;\n    return (0, react_1.useMemo)(function () {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (!item) {\n            return undefined;\n        }\n        var viewState = environment.viewState[treeId];\n        var currentlySelectedItems = ((_b = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.map(function (item) { return environment.items[item]; })) !== null && _b !== void 0 ? _b : ((viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem)\n            ? [environment.items[viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem]]\n            : [])).filter(function (item) { return !!item; });\n        var isItemPartOfSelectedItems = !!currentlySelectedItems.find(function (selectedItem) { return selectedItem.index === item.index; });\n        var canDragCurrentlySelectedItems = currentlySelectedItems &&\n            ((_d = (_c = environment.canDrag) === null || _c === void 0 ? void 0 : _c.call(environment, currentlySelectedItems)) !== null && _d !== void 0 ? _d : true) &&\n            currentlySelectedItems\n                .map(function (item) { var _a; return (_a = item.canMove) !== null && _a !== void 0 ? _a : true; })\n                .reduce(function (a, b) { return a && b; }, true);\n        var canDragThisItem = ((_f = (_e = environment.canDrag) === null || _e === void 0 ? void 0 : _e.call(environment, [item])) !== null && _f !== void 0 ? _f : true) && ((_g = item.canMove) !== null && _g !== void 0 ? _g : true);\n        var canDrag = environment.canDragAndDrop &&\n            ((isItemPartOfSelectedItems && canDragCurrentlySelectedItems) ||\n                (!isItemPartOfSelectedItems && canDragThisItem));\n        var canDropOn = environment.canDragAndDrop &&\n            !!((_j = (_h = dnd.viableDragPositions) === null || _h === void 0 ? void 0 : _h[treeId]) === null || _j === void 0 ? void 0 : _j.find(function (position) {\n                return position.targetType === 'item' && position.targetItem === item.index;\n            }));\n        var actions = {\n            // TODO disable most actions during rename\n            primaryAction: function () {\n                var _a;\n                (_a = environment.onPrimaryAction) === null || _a === void 0 ? void 0 : _a.call(environment, environment.items[item.index], treeId);\n            },\n            collapseItem: function () {\n                var _a;\n                (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n            },\n            expandItem: function () {\n                var _a;\n                (_a = environment.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n            },\n            toggleExpandedState: function () {\n                var _a, _b;\n                if (isExpanded) {\n                    (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\n                }\n                else {\n                    (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\n                }\n            },\n            selectItem: function () {\n                var _a;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [item.index], treeId);\n            },\n            addToSelectedItems: function () {\n                var _a, _b;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, __spreadArray(__spreadArray([], ((_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _b !== void 0 ? _b : []), true), [item.index], false), treeId);\n            },\n            unselectItem: function () {\n                var _a, _b, _c;\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, (_c = (_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _b === void 0 ? void 0 : _b.filter(function (id) { return id !== item.index; })) !== null && _c !== void 0 ? _c : [], treeId);\n            },\n            selectUpTo: function (overrideOldSelection) {\n                selectUpTo(item, overrideOldSelection);\n            },\n            startRenamingItem: function () {\n                setRenamingItem(item.index);\n            },\n            stopRenamingItem: function () {\n                setRenamingItem(null);\n            },\n            focusItem: function (setDomFocus) {\n                var _a;\n                if (setDomFocus === void 0) { setDomFocus = true; }\n                (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId, setDomFocus);\n            },\n            startDragging: function () {\n                var _a, _b;\n                var selectedItems = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _a !== void 0 ? _a : [];\n                if (!selectedItems.includes(item.index)) {\n                    selectedItems = [item.index];\n                    (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, selectedItems, treeId);\n                }\n                if (canDrag) {\n                    var orderedItems = getOriginalItemOrder(treeId, selectedItems.map(function (id) { return environment.items[id]; }));\n                    dnd.onStartDraggingItems(orderedItems, treeId);\n                }\n            },\n        };\n        var renderFlags = {\n            isSelected: isSelected,\n            isExpanded: isExpanded,\n            isFocused: (viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem) === item.index,\n            isRenaming: isRenaming,\n            isDraggingOver: dnd.draggingPosition &&\n                dnd.draggingPosition.targetType === 'item' &&\n                dnd.draggingPosition.targetItem === item.index &&\n                dnd.draggingPosition.treeId === treeId,\n            isDraggingOverParent: false,\n            isSearchMatching: isSearchMatching,\n            canDrag: canDrag,\n            canDropOn: canDropOn,\n        };\n        var interactiveElementProps = __assign(__assign({}, interactionManager.createInteractiveElementProps(item, treeId, actions, renderFlags, viewState)), {\n            'data-rct-item-interactive': true,\n            'data-rct-item-focus': renderFlags.isFocused ? 'true' : 'false',\n            'data-rct-item-id': item.index,\n        });\n        var itemContainerWithoutChildrenProps = __assign({}, {\n            'data-rct-item-container': 'true',\n        });\n        var itemContainerWithChildrenProps = {\n            role: 'treeitem',\n            'aria-selected': renderFlags.isSelected,\n            'aria-expanded': item.isFolder\n                ? renderFlags.isExpanded\n                    ? 'true'\n                    : 'false'\n                : undefined,\n        };\n        var arrowProps = {\n            onClick: function () {\n                if (item.isFolder) {\n                    actions.toggleExpandedState();\n                }\n                actions.selectItem();\n            },\n            onFocus: function () {\n                actions.focusItem();\n            },\n            onDragOver: function (e) {\n                e.preventDefault(); // Allow drop\n            },\n            'aria-hidden': true,\n            tabIndex: -1,\n        };\n        var viewStateFlags = !viewState\n            ? {}\n            : Object.entries(viewState).reduce(function (acc, _a) {\n                var key = _a[0], value = _a[1];\n                acc[key] = Array.isArray(value)\n                    ? value.includes(item.index)\n                    : value === item.index;\n                return acc;\n            }, {});\n        return __assign(__assign(__assign({}, actions), renderFlags), { interactiveElementProps: interactiveElementProps, itemContainerWithChildrenProps: itemContainerWithChildrenProps, itemContainerWithoutChildrenProps: itemContainerWithoutChildrenProps, arrowProps: arrowProps, viewStateFlags: viewStateFlags });\n    }, [\n        item,\n        environment,\n        treeId,\n        dnd,\n        isSelected,\n        isExpanded,\n        isRenaming,\n        isSearchMatching,\n        interactionManager,\n        selectUpTo,\n        setRenamingItem,\n        getOriginalItemOrder,\n    ]);\n};\nexports.useTreeItemRenderContext = useTreeItemRenderContext;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InteractionMode = void 0;\nvar InteractionMode;\n(function (InteractionMode) {\n    InteractionMode[\"DoubleClickItemToExpand\"] = \"double-click-item-to-expand\";\n    InteractionMode[\"ClickItemToExpand\"] = \"click-item-to-expand\";\n    InteractionMode[\"ClickArrowToExpand\"] = \"click-arrow-to-expand\";\n})(InteractionMode = exports.InteractionMode || (exports.InteractionMode = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CompleteTreeDataProvider = void 0;\nvar CompleteTreeDataProvider = /** @class */ (function () {\n    function CompleteTreeDataProvider(provider) {\n        this.provider = provider;\n    }\n    CompleteTreeDataProvider.prototype.getTreeItem = function (itemId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provider.getTreeItem(itemId)];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.getTreeItems = function (itemIds) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.provider.getTreeItems\n                        ? this.provider.getTreeItems(itemIds)\n                        : Promise.all(itemIds.map(function (id) { return _this.provider.getTreeItem(id); }))];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, (_b = (_a = this.provider).onChangeItemChildren) === null || _b === void 0 ? void 0 : _b.call(_a, itemId, newChildren)];\n            });\n        });\n    };\n    CompleteTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\n        return this.provider.onDidChangeTreeData\n            ? this.provider.onDidChangeTreeData(listener)\n            : { dispose: function () { } };\n    };\n    CompleteTreeDataProvider.prototype.onRenameItem = function (item, name) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_c) {\n                return [2 /*return*/, (_b = (_a = this.provider).onRenameItem) === null || _b === void 0 ? void 0 : _b.call(_a, item, name)];\n            });\n        });\n    };\n    return CompleteTreeDataProvider;\n}());\nexports.CompleteTreeDataProvider = CompleteTreeDataProvider;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StaticTreeDataProvider = void 0;\nvar EventEmitter_1 = require(\"../EventEmitter\");\nvar StaticTreeDataProvider = /** @class */ (function () {\n    function StaticTreeDataProvider(items, setItemName\n    // private implicitItemOrdering?: (itemA: TreeItem<T>, itemB: TreeItem<T>) => number,\n    ) {\n        /** Emit an event with the changed item ids to notify the tree view about changes. */\n        this.onDidChangeTreeDataEmitter = new EventEmitter_1.EventEmitter();\n        this.data = { items: items };\n        this.setItemName = setItemName;\n    }\n    StaticTreeDataProvider.prototype.getTreeItem = function (itemId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.data.items[itemId]];\n            });\n        });\n    };\n    StaticTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.data.items[itemId].children = newChildren;\n                this.onDidChangeTreeDataEmitter.emit([itemId]);\n                return [2 /*return*/];\n            });\n        });\n    };\n    StaticTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\n        var _this = this;\n        var handlerId = this.onDidChangeTreeDataEmitter.on(function (payload) {\n            return listener(payload);\n        });\n        return { dispose: function () { return _this.onDidChangeTreeDataEmitter.off(handlerId); } };\n    };\n    StaticTreeDataProvider.prototype.onRenameItem = function (item, name) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (this.setItemName) {\n                    this.data.items[item.index] = this.setItemName(item, name);\n                    // this.onDidChangeTreeDataEmitter.emit(item.index);\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return StaticTreeDataProvider;\n}());\nexports.StaticTreeDataProvider = StaticTreeDataProvider;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UncontrolledTreeEnvironment = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_1 = require(\"react\");\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\nvar CompleteTreeDataProvider_1 = require(\"./CompleteTreeDataProvider\");\nvar useIsMounted_1 = require(\"../useIsMounted\");\nvar useRefCopy_1 = require(\"../useRefCopy\");\n/* const createCompleteDataProvider = (provider: TreeDataProvider): CompleteTreeDataProvider => ({ // TODO Write class that internally uses provider instead\n  ...provider,\n  getTreeItem: provider.getTreeItem,\n  onDidChangeTreeData: provider.onDidChangeTreeData?.bind(provider) ?? (() => ({ dispose: () => {} })),\n  getTreeItems: provider.getTreeItems?.bind(provider) ?? (itemIds => Promise.all(itemIds.map(id => provider.getTreeItem(id)))),\n  onRenameItem: provider.onRenameItem?.bind(provider) ?? (async () => {}),\n  onChangeItemChildren: provider.onChangeItemChildren?.bind(provider) ?? (async () => {}),\n}); */\nexports.UncontrolledTreeEnvironment = React.forwardRef(function (props, ref) {\n    var _a = (0, react_1.useState)({}), currentItems = _a[0], setCurrentItems = _a[1];\n    var _b = (0, react_1.useState)(props.viewState), viewState = _b[0], setViewState = _b[1];\n    var viewStateRef = (0, useRefCopy_1.useRefCopy)(viewState);\n    var missingItemIds = (0, react_1.useRef)([]);\n    var dataProvider = (0, react_1.useMemo)(function () { return new CompleteTreeDataProvider_1.CompleteTreeDataProvider(props.dataProvider); }, [props.dataProvider]);\n    var isMounted = (0, useIsMounted_1.useIsMounted)();\n    var writeItems = (0, react_1.useCallback)(function (newItems) {\n        if (!isMounted.current)\n            return;\n        setCurrentItems(function (oldItems) { return (__assign(__assign({}, oldItems), newItems)); });\n    }, [isMounted]);\n    var amendViewState = (0, react_1.useCallback)(function (treeId, constructNewState) {\n        setViewState(function (oldState) {\n            var _a;\n            var _b;\n            return (__assign(__assign({}, oldState), (_a = {}, _a[treeId] = __assign(__assign({}, oldState[treeId]), constructNewState((_b = oldState[treeId]) !== null && _b !== void 0 ? _b : {})), _a)));\n        });\n    }, []);\n    (0, react_1.useEffect)(function () {\n        var dispose = dataProvider.onDidChangeTreeData(function (changedItemIds) {\n            dataProvider.getTreeItems(changedItemIds).then(function (items) {\n                writeItems(items\n                    .map(function (item) {\n                    var _a;\n                    return (_a = {}, _a[item.index] = item, _a);\n                })\n                    .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\n            });\n        }).dispose;\n        return dispose;\n    }, [dataProvider, writeItems]);\n    // TODO memoize props or this component itself\n    return (React.createElement(ControlledTreeEnvironment_1.ControlledTreeEnvironment, __assign({}, props, { ref: ref, viewState: viewState, items: currentItems, onExpandItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) {\n                var _a;\n                return (__assign(__assign({}, old), { expandedItems: __spreadArray(__spreadArray([], ((_a = old.expandedItems) !== null && _a !== void 0 ? _a : []), true), [item.index], false) }));\n            });\n            (_a = props.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onCollapseItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) {\n                var _a;\n                return (__assign(__assign({}, old), { expandedItems: (_a = old.expandedItems) === null || _a === void 0 ? void 0 : _a.filter(function (id) { return id !== item.index; }) }));\n            });\n            (_a = props.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onSelectItems: function (items, treeId) {\n            var _a, _b, _c;\n            var oldFocusedItem = (_a = viewStateRef.current[treeId]) === null || _a === void 0 ? void 0 : _a.focusedItem;\n            if (props.disableMultiselect) {\n                var newSelected_1 = oldFocusedItem ? [oldFocusedItem] : [];\n                (_b = props.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(props, newSelected_1, treeId);\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: newSelected_1 })); });\n            }\n            else {\n                (_c = props.onSelectItems) === null || _c === void 0 ? void 0 : _c.call(props, items, treeId);\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: items })); });\n            }\n        }, onFocusItem: function (item, treeId) {\n            var _a;\n            amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { focusedItem: item.index })); });\n            (_a = props.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\n        }, onRenameItem: function (item, name, treeId) { return __awaiter(void 0, void 0, void 0, function () {\n            var newItem;\n            var _a;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, dataProvider.onRenameItem(item, name)];\n                    case 1:\n                        _c.sent();\n                        amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { renamingItem: undefined })); });\n                        return [4 /*yield*/, dataProvider.getTreeItem(item.index)];\n                    case 2:\n                        newItem = _c.sent();\n                        writeItems((_a = {}, _a[item.index] = newItem, _a));\n                        (_b = props.onRenameItem) === null || _b === void 0 ? void 0 : _b.call(props, item, name, treeId);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, onDrop: function (items, target) { return __awaiter(void 0, void 0, void 0, function () {\n            var promises, itemsIndices, itemsPriorToInsertion, _loop_1, _i, items_1, item, state_1, newParent, newParentChildren;\n            var _a, _b, _c, _d, _e;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        promises = [];\n                        itemsIndices = items.map(function (i) { return i.index; });\n                        itemsPriorToInsertion = 0;\n                        _loop_1 = function (item) {\n                            var parent_1 = Object.values(currentItems).find(function (potentialParent) { var _a, _b; return (_b = (_a = potentialParent === null || potentialParent === void 0 ? void 0 : potentialParent.children) === null || _a === void 0 ? void 0 : _a.includes) === null || _b === void 0 ? void 0 : _b.call(_a, item.index); });\n                            if (!parent_1) {\n                                throw Error(\"Could not find parent of item \\\"\".concat(item.index, \"\\\"\"));\n                            }\n                            if (!parent_1.children) {\n                                throw Error(\"Parent \\\"\".concat(parent_1.index, \"\\\" of item \\\"\").concat(item.index, \"\\\" did not have any children\"));\n                            }\n                            if (target.targetType === 'between-items' &&\n                                target.parentItem === item.index) {\n                                return { value: void 0 };\n                            }\n                            if ((target.targetType === 'item' || target.targetType === 'root') &&\n                                target.targetItem !== parent_1.index) {\n                                promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\n                            }\n                            if (target.targetType === 'between-items') {\n                                if (target.parentItem === parent_1.index) {\n                                    var newParent = currentItems[target.parentItem];\n                                    var isOldItemPriorToNewItem = ((_b = ((_a = newParent.children) !== null && _a !== void 0 ? _a : []).findIndex(function (child) { return child === item.index; })) !== null && _b !== void 0 ? _b : Infinity) < target.childIndex;\n                                    itemsPriorToInsertion += isOldItemPriorToNewItem ? 1 : 0;\n                                }\n                                else {\n                                    promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\n                                }\n                            }\n                        };\n                        // move old items out\n                        for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                            item = items_1[_i];\n                            state_1 = _loop_1(item);\n                            if (typeof state_1 === \"object\")\n                                return [2 /*return*/, state_1.value];\n                        }\n                        // insert new items\n                        if (target.targetType === 'item' || target.targetType === 'root') {\n                            promises.push(dataProvider.onChangeItemChildren(target.targetItem, __spreadArray(__spreadArray([], ((_c = currentItems[target.targetItem].children) !== null && _c !== void 0 ? _c : []).filter(function (i) { return !itemsIndices.includes(i); }), true), itemsIndices, true)));\n                        }\n                        else {\n                            newParent = currentItems[target.parentItem];\n                            newParentChildren = __spreadArray([], ((_d = newParent.children) !== null && _d !== void 0 ? _d : []), true).filter(function (c) { return !itemsIndices.includes(c); });\n                            newParentChildren.splice.apply(newParentChildren, __spreadArray([target.childIndex - itemsPriorToInsertion,\n                                0], itemsIndices, false));\n                            promises.push(dataProvider.onChangeItemChildren(target.parentItem, newParentChildren));\n                        }\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _f.sent();\n                        (_e = props.onDrop) === null || _e === void 0 ? void 0 : _e.call(props, items, target);\n                        return [2 /*return*/];\n                }\n            });\n        }); }, onMissingItems: function (itemIds) {\n            var _a;\n            var _b;\n            // Batch individual fetch-item-calls together\n            if (missingItemIds.current.length === 0) {\n                setTimeout(function () {\n                    dataProvider.getTreeItems(missingItemIds.current).then(function (items) {\n                        writeItems(items\n                            .map(function (item) {\n                            var _a;\n                            return (_a = {}, _a[item === null || item === void 0 ? void 0 : item.index] = item, _a);\n                        })\n                            .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\n                    });\n                    missingItemIds.current = [];\n                });\n            }\n            (_a = missingItemIds.current).push.apply(_a, itemIds);\n            (_b = props.onMissingItems) === null || _b === void 0 ? void 0 : _b.call(props, itemIds);\n        } }), props.children));\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCallSoon = void 0;\nvar react_1 = require(\"react\");\n/**\n * React hook that schedules a callback to be run \"soon\" and will cancel the\n * callback if it is still pending when the component is unmounted.\n *\n * @returns A function that can be used to schedule a deferred callback.\n */\nfunction useCallSoon(dontClean) {\n    if (dontClean === void 0) { dontClean = false; }\n    var handleRef = (0, react_1.useRef)(new Array());\n    (0, react_1.useEffect)(function () {\n        if (dontClean) {\n            return function () { };\n        }\n        var handles = handleRef.current;\n        return function () { return handles.forEach(function (handle) { return cancelAnimationFrame(handle); }); };\n    }, [dontClean, handleRef]);\n    return (0, react_1.useCallback)(function (callback) {\n        var handle = requestAnimationFrame(function () {\n            handleRef.current.splice(handleRef.current.indexOf(handle), 1);\n            callback();\n        });\n        handleRef.current.push(handle);\n    }, [handleRef]);\n}\nexports.useCallSoon = useCallSoon;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGetOriginalItemOrder = void 0;\nvar ControlledTreeEnvironment_1 = require(\"./controlledEnvironment/ControlledTreeEnvironment\");\nvar useStableHandler_1 = require(\"./useStableHandler\");\nvar useGetOriginalItemOrder = function () {\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\n    return (0, useStableHandler_1.useStableHandler)(function (treeId, items) {\n        return items\n            .map(function (item) {\n            return [\n                item,\n                env.linearItems[treeId].findIndex(function (linearItem) { return linearItem.item === item.index; }),\n            ];\n        })\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            .sort(function (_a, _b) {\n            var _ = _a[0], aPos = _a[1];\n            var _2 = _b[0], bPos = _b[1];\n            return aPos - bPos;\n        })\n            .map(function (_a) {\n            var item = _a[0];\n            return item;\n        });\n    });\n};\nexports.useGetOriginalItemOrder = useGetOriginalItemOrder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useHtmlElementEventListener = void 0;\nvar react_1 = require(\"react\");\nvar useStableHandler_1 = require(\"./useStableHandler\");\nvar useHtmlElementEventListener = function (element, type, listener) {\n    var stableListener = (0, useStableHandler_1.useStableHandler)(listener);\n    (0, react_1.useEffect)(function () {\n        if (element) {\n            element.addEventListener(type, stableListener);\n            return function () { return element.removeEventListener(type, stableListener); };\n        }\n        return function () { };\n    }, [element, stableListener, type]);\n};\nexports.useHtmlElementEventListener = useHtmlElementEventListener;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useIsMounted = void 0;\nvar react_1 = require(\"react\");\nvar useIsMounted = function () {\n    var mountedRef = (0, react_1.useRef)(false);\n    (0, react_1.useEffect)(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return mountedRef;\n};\nexports.useIsMounted = useIsMounted;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useRefCopy = void 0;\nvar react_1 = require(\"react\");\nvar useRefCopy = function (value) {\n    var ref = (0, react_1.useRef)(value);\n    ref.current = value;\n    return ref;\n};\nexports.useRefCopy = useRefCopy;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useSideEffect = void 0;\nvar react_1 = require(\"react\");\nvar useSideEffect = function (effect, deps, changeOn) {\n    var previousRef = (0, react_1.useRef)();\n    (0, react_1.useEffect)(function () {\n        if (!previousRef.current) {\n            previousRef.current = __spreadArray([], changeOn, true);\n            effect();\n        }\n        else {\n            var changed = previousRef.current.some(function (v, i) { return v !== changeOn[i]; });\n            if (changed) {\n                previousRef.current = __spreadArray([], changeOn, true);\n                effect();\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, __spreadArray(__spreadArray([], deps, true), changeOn, true));\n};\nexports.useSideEffect = useSideEffect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useStableHandler = void 0;\nvar react_1 = require(\"react\");\nvar useRefCopy_1 = require(\"./useRefCopy\");\nvar useStableHandler = function (handler) {\n    var handlerRef = (0, useRefCopy_1.useRefCopy)(handler);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return (0, react_1.useCallback)((function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return handlerRef.current.apply(handlerRef, args);\n    }), [\n        handlerRef,\n    ]);\n};\nexports.useStableHandler = useStableHandler;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDocument = exports.buildMapForTrees = void 0;\nvar buildMapForTrees = function (treeIds, build) {\n    return treeIds\n        .map(function (id) { return [id, build(id)]; })\n        .reduce(function (a, _a) {\n        var _b;\n        var id = _a[0], obj = _a[1];\n        return (__assign(__assign({}, a), (_b = {}, _b[id] = obj, _b)));\n    }, {});\n};\nexports.buildMapForTrees = buildMapForTrees;\nvar getDocument = function () {\n    return typeof document !== 'undefined' ? document : undefined;\n};\nexports.getDocument = getDocument;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.waitFor = void 0;\nvar waitFor = function (check, intervalMs, timeoutMs) {\n    if (intervalMs === void 0) { intervalMs = 50; }\n    if (timeoutMs === void 0) { timeoutMs = 10000; }\n    return new Promise(function (resolve) {\n        if (check()) {\n            resolve();\n        }\n        var complete;\n        var interval = setInterval(function () {\n            if (check()) {\n                complete();\n            }\n        }, intervalMs);\n        var timeout = setTimeout(function () {\n            complete();\n        }, timeoutMs);\n        complete = function () {\n            clearInterval(interval);\n            clearTimeout(timeout);\n            resolve();\n        };\n    });\n};\nexports.waitFor = waitFor;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1024__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3607);\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__1024__","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","EventEmitter","options","handlerCount","handlers","prototype","get","filter","h","enumerable","configurable","emit","payload","_a","_b","promises","_i","_c","handler","res","_d","logger","all","on","off","handlerId","delete","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","__setModuleDefault","__importStar","mod","hasOwnProperty","ControlledTreeEnvironment","useTreeEnvironment","React","react_1","InteractionManagerProvider_1","DragAndDropProvider_1","EnvironmentActionsProvider_1","useControlledTreeEnvironmentProps_1","TreeEnvironmentContext","createContext","useContext","forwardRef","props","ref","environmentContextProps","useControlledTreeEnvironmentProps","viewState","onFocusItem","useEffect","keys","trees","treeId","firstItemIndex","items","rootItem","children","firstItem","focusedItem","createElement","Provider","InteractionManagerProvider","DragAndDropProvider","EnvironmentActionsProvider","useInteractionManager","types_1","ControlledTreeEnvironment_1","mergeInteractionManagers_1","buildInteractionMode_1","InteractionManagerContext","environment","defaultInteractionMode","interactionManager","useMemo","extends","mergeInteractionManagers","buildInteractionMode","InteractionMode","ClickItemToExpand","DoubleClickItemToExpandInteractionManager_1","ClickItemToExpandInteractionManager_1","ClickArrowToExpandInteractionManager_1","mode","DoubleClickItemToExpand","DoubleClickItemToExpandInteractionManager","ClickItemToExpandInteractionManager","ClickArrowToExpand","ClickArrowToExpandInteractionManager","Error","concat","isOutsideOfContainer","computeItemHeight","utils_1","getDocument","querySelector","style","getComputedStyle","offsetHeight","Math","max","parseFloat","marginTop","marginBottom","treeBb","clientX","left","right","clientY","top","bottom","__assign","assign","s","i","arguments","p","main","fallback","createInteractiveElementProps","item","actions","renderFlags","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","scrollIntoView_1","useRenderers_1","getItemsLinearly_1","useRefCopy_1","onExpandItemProp","onExpandItem","onCollapseProp","onCollapseItem","onDropProp","onDrop","useState","setTrees","activeTreeId","setActiveTreeId","treeIds","autoFocus","onRegisterTree","onUnregisterTree","onFocusItemRef","useRefCopy","viewStateRef","linearItems","buildMapForTrees","getItemsLinearly","onFocusItemHandler","useCallback","setDomFocus","_e","_f","_g","_h","_j","newItem","index","activeElement","attributes","getNamedItem","focus","scrollIntoView","current","registerTree","tree","unregisterTree","target","focusTree","focusItem","setActiveTree","treeIdOrSetStateFunction","autoFocusTree","maybeFocusTree","contains","document","oldValue","renderers","useRenderers","useLinearItems","useDragAndDrop","useCanDropAt_1","useGetViableDragPositions_1","useSideEffect_1","useCallSoon_1","useStableHandler_1","useGetOriginalItemOrder_1","useDraggingPosition_1","layoutUtils_1","DragAndDropContext","isProgrammaticallyDragging","setIsProgrammaticallyDragging","viableDragPositions","setViableDragPositions","programmaticDragIndex","setProgrammaticDragIndex","draggingPosition","setDraggingPosition","getViableDragPositions","useGetViableDragPositions","callSoon","useCallSoon","getOriginalItemOrder","useGetOriginalItemOrder","useDraggingPosition","initiateDraggingPosition","resetDraggingPosition","draggingItems","getDraggingPosition","itemHeight","resetProgrammaticDragIndexForCurrentTree","focusItem_1","treeDragPositions","newPos","findIndex","pos","targetType","targetItem","parentItem","childIndex","min","resetState","useStableHandler","useSideEffect","canDropAt","useCanDropAt","onDragOverTreeHandler","containerRef","newDraggingPosition","onSelectItems","map","performDrag","onDragLeaveContainerHandler","getBoundingClientRect","onDropHandler","onStartDraggingItems","treeViableDragPositions","startProgrammaticDrag","canDragAndDrop","draggingItems_1","selectedItems","resolvedDraggingItems","id","canDrag","setTimeout","abortProgrammaticDrag","completeProgrammaticDrag","programmaticDragUp","oldIndex","programmaticDragDown","dnd","window","addEventListener","removeEventListener","DraggingPositionEvaluation","env","hoveringPosition","getParentOfLinearItem","linearIndex","offset","indentation","getEmptyTreeDragPosition","depth","maybeRedirectToParent","canReorderItems","canDropOnNonFolder","isFolder","parentLinearIndex","parent_1","parent","maybeReparentUpwards","treeLinearItems","deepestDepth","legalDropDepthCount","insertionItemAbove","droppingIndent","newParent","reparentedChildIndex","isDescendant","linePosition","maybeRedirectInsideOpenFolder","nextItem","canDropBelowOpenFolders","maybeMapToBottomOffset","priorItem","depthDistanceToPrior","canDropAtCurrentTarget","_this","targetItemData","canDropOnFolder","some","draggingItem","reparented","areDraggingItemsDescendantOfTarget","newChildIndex","itemLinearIndex","potentialParents","resolvedItem","DraggingPositionEvaluation_1","useGetParentOfLinearItem_1","dragCode","useRef","setDraggingItems","useGetGetParentOfLinearItem","isNewDragPosition","newDragCode","getHoveringPosition","floor","targetLinearItem","renderDepthOffset","lineThreshold","targets","skipUntilDepthIsLowerThan","itemPosition","topPosition","bottomPosition","depthOfItemAbove","isBelowOpenFolder","__spreadArray","to","from","pack","ar","l","Array","slice","useEnvironmentActions","useCreatedEnvironmentRef_1","waitFor_1","EnvironmentActionsContext","recursiveExpand","itemId","onExpand","_loop_1","childId","waitFor","onRenameItem","onPrimaryAction","itemsRef","collapseItem","expandItem","moveFocusDown","currentFocusIndex","newIndex","moveFocusUp","renameItem","name","selectItems","itemsIds","toggleItemExpandedState","expandedItems","includes","toggleItemSelectStatus","invokePrimaryAction","expandSubsequently","itemIds","rest","expandAll","collapseAll","moveProgrammaticDragPositionDown","moveProgrammaticDragPositionUp","useCreatedEnvironmentRef","useImperativeHandle","treeEnvironmentContext","dragAndDropContext","defaultKeyboardBindings","expandSiblings","moveFocusToFirstItem","moveFocusToLastItem","primaryAction","abortRenameItem","toggleSelectItem","abortSearch","startSearch","selectAll","startProgrammaticDnd","completeProgrammaticDnd","abortProgrammaticDnd","useHotkey","useHtmlElementEventListener_1","useKeyboardBindings_1","elementsThatCanTakeText","combinationName","onHit","active","activatableWhileFocusingInput","pressedKeys","keyboardBindings","useKeyboardBindings","possibleCombinations","combination","split","useHtmlElementEventListener","tagName","toLowerCase","isContentEditable","key","pressedKeysLowercase_1","reduce","a","b","test","preventDefault","pressedKeysLowercase","useKey","defaultKeyboardBindings_1","__exportStar","INTERNALS","TreeItemElement_1","TreeItemChildren_1","TreeItemElement","TreeItemChildren","isControlKey_1","onClick","isSpacebarEvent","detail","shiftKey","selectUpTo","isControlKey","isSelected","unselectItem","addToSelectedItems","selectItem","canInvokePrimaryActionOnItemContainer","onFocus","onDragStart","dataTransfer","dropEffect","startDragging","onDragOver","draggable","isRenaming","tabIndex","isFocused","toggleExpandedState","onDoubleClick","ctrlKey","navigator","platform","toUpperCase","metaKey","__importDefault","createDefaultRenderers","cx","classNames","cn","join","rtl","renderItemTitle","title","context","info","isSearching","isSearchMatching","startIndex","search","default","Fragment","className","renderItemArrow","isExpanded","arrowProps","version","xmlns","xmlnsXlink","x","viewBox","enableBackground","xmlSpace","fillRule","clipRule","d","renderItem","arrow","InteractiveComponent","type","itemContainerWithChildrenProps","isDraggingOver","itemContainerWithoutChildrenProps","interactiveElementProps","renderRenameInput","inputProps","inputRef","submitButtonProps","submitButtonRef","formProps","renderTreeContainer","containerProps","areItemsSelected","minHeight","renderItemsContainer","renderDragBetweenLine","lineProps","renderSearchInput","renderLiveDescriptorContainer","clip","clipPath","height","overflow","position","whiteSpace","width","createDefaultRenderers_1","defaultRenderers","customRenderers","entries","acc","keyMapped","displayName","SearchInput","useHotkey_1","Tree_1","useSearchMatchFocus_1","useViewState_1","useTree","setSearch","renamingItem","useViewState","isActiveTree","useSearchMatchFocus","clearSearch","unicode","charCodeAt","canSearch","canSearchByStartingTyping","altKey","onChange","onBlur","el","defaultMatcher","itemTitle","defaultMatcher_1","useLinearItems_1","doesSearchMatchItem","getItemTitle","find","DragBetweenLine","LiveDescription","defaultLiveDescriptors_1","resolveLiveDescriptor_1","LiveWrapper","live","dangerouslySetInnerHTML","__html","descriptors","liveDescriptors","defaultLiveDescriptors","MainWrapper","treeInformation","resolveLiveDescriptor","searching","programmaticallyDragging","programmaticallyDraggingTarget","introduction","MaybeLiveDescription","LiveDescription_1","showLiveDescription","Tree","TreeManager_1","useCreatedTreeInformation_1","TreeActionsProvider_1","TreeContext","setRenamingItem","useCreatedTreeInformation","treeContextProps","treeLabel","treeLabelledBy","onMissingItems","TreeActionsProvider","TreeManager","DragBetweenLine_1","useFocusWithin_1","useTreeKeyboardBindings_1","SearchInput_1","MaybeLiveDescription_1","useTreeKeyboardBindings","useFocusWithin","oldTreeId","rootChildren","treeChildren","parentId","onDragLeave","onMouseDown","role","descriptor","replace","variableNameWithBrackets","variableName","parentTitle","startsWith","element","scrollIntoViewIfNeeded","boundingBox","innerHeight","documentElement","clientHeight","innerWidth","clientWidth","onFocusIn","onFocusOut","focusWithin","setFocusWithin","isLoosingFocusFlag","useMoveFocusToIndex","computeNewIndex","newIndexBounded","newFocusItem","useSelectUpTo","startingAt","focusedItemPrevious","previous","overrideOldSelection","itemIndex","selectMergedItems","oldSelection","newSelection","merged","lastFocus_1","selectionStart","linearItem","selectionEnd","selection","useKey_1","useMoveFocusToIndex_1","useSelectUpTo_1","moveFocusToIndex","enableArrowKeys","disableArrowKeys","currentIndex","itemDepth","parentIndex","stopPropagation","canRename","onStartRenamingItem","useTreeActions","useCreatedTreeRef_1","envActions","abortRenamingItem","completeRenamingItem","startRenamingItem","stopRenamingItem","useCreatedTreeRef","treeContext","childElements","child","useTreeItemRenderContext_1","TreeItemRenamingInput_1","hasBeenRequested","setHasBeenRequested","renderContext","useTreeItemRenderContext","shouldRenderChildren","titleComponent","TreeItemRenamingInput","arrowComponent","setTitle","abort","onAbortRenamingItem","confirm","select","relatedTarget","onSubmit","currentlySelectedItems","isItemPartOfSelectedItems","selectedItem","canDragCurrentlySelectedItems","canMove","canDragThisItem","canDropOn","orderedItems","isDraggingOverParent","viewStateFlags","isArray","CompleteTreeDataProvider","provider","getTreeItem","getTreeItems","onChangeItemChildren","newChildren","onDidChangeTreeData","listener","dispose","StaticTreeDataProvider","EventEmitter_1","setItemName","onDidChangeTreeDataEmitter","data","UncontrolledTreeEnvironment","CompleteTreeDataProvider_1","useIsMounted_1","currentItems","setCurrentItems","setViewState","missingItemIds","dataProvider","isMounted","useIsMounted","writeItems","newItems","oldItems","amendViewState","constructNewState","oldState","changedItemIds","old","oldFocusedItem","disableMultiselect","newSelected_1","itemsIndices","itemsPriorToInsertion","items_1","state_1","newParentChildren","values","potentialParent","isOldItemPriorToNewItem","Infinity","c","splice","dontClean","handleRef","handles","forEach","handle","cancelAnimationFrame","callback","requestAnimationFrame","sort","aPos","stableListener","mountedRef","effect","deps","changeOn","previousRef","handlerRef","args","build","obj","check","intervalMs","timeoutMs","complete","interval","setInterval","timeout","clearInterval","clearTimeout","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}